(this.webpackJsonpmyfactomwallet=this.webpackJsonpmyfactomwallet||[]).push([[0],{14:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));var r=a(1),n=a.n(r);const s=n.a.createContext(),l=e=>t=>n.a.createElement(s.Consumer,null,a=>n.a.createElement(e,Object.assign({},t,{networkController:a})))},15:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));var r=a(1),n=a.n(r);const s=n.a.createContext(),l=e=>t=>n.a.createElement(s.Consumer,null,a=>n.a.createElement(e,Object.assign({},t,{walletController:a})))},169:function(e,t,a){e.exports=a.p+"static/media/ledgerLogo.e1222cef.svg"},312:function(e,t,a){e.exports=a.p+"static/media/headerLogo.e79a5c9c.png"},318:function(e,t,a){"use strict";(function(e){var r=a(7),n=a.n(r),s=a(8),l=a(1),o=a.n(l),c=a(11),i=a.n(c),d=a(51),m=a(175),u=a(176),p=a.n(u),h=a(14),E=a(15),b=a(19);const f={fct:131,ec:132,identity:281};class g extends o.a.Component{constructor(t){var a;super(t),a=this,this.getLedgerAddresses=function(){var e=Object(s.a)(n.a.mark((function e(t,r,s){var l,o,c,i,d,u,h,E;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],o=a.props.networkController.networkProps.bip32Account,c=f[s],e.next=5,m.a.create();case 5:i=e.sent,d=new p.a(i),u=t;case 8:if(!(u<t+r)){e.next=17;break}return h="44'/"+c+"'/"+o+"'/0/"+u,e.next=12,d.getAddress(h);case 12:E=e.sent,l.push({address:E.address});case 14:u++,e.next=8;break;case 17:return i.close(),e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),this.signTransaction=function(){var t=Object(s.a)(n.a.mark((function t({fromAddr:r,toAddr:s,amount:l,index:o}){var c,i,d,u,h,E,f;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={},t.next=3,m.a.create();case 3:return i=t.sent,d=a.props.networkController.networkProps.bip32Account,u="44'/131'/"+d+"'/0/"+o,h=new p.a(i),t.t0=b.Transaction.builder(),t.t1=r,t.t2=l,t.next=12,a.props.walletController.getFactoshiFee();case 12:return t.t3=t.sent,t.t4=t.t2+t.t3,E=t.t0.input.call(t.t0,t.t1,t.t4).output(s,l).build(),t.next=17,h.signTransaction(u,E.marshalBinarySig.toString("hex"));case 17:return(f=t.sent)&&(c=b.Transaction.builder(E).rcdSignature(e.from(f.r,"hex"),e.from(f.s,"hex")).build()),i.close(),t.abrupt("return",c);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.checkAddress=function(){var e=Object(s.a)(n.a.mark((function e(t,r){var s,l,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.props.networkController.networkProps.bip32Account,l="44'/"+f[r]+"'/"+s+"'/0/"+t.index,e.prev=3,e.next=6,m.a.create();case 6:return o=e.sent,c=new p.a(o),e.next=10,c.getAddress(l,!0);case 10:o.close(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("Failed getFctAddr from Ledger Nano X/S :",e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,a){return e.apply(this,arguments)}}(),this.state={getLedgerAddresses:this.getLedgerAddresses,signTransaction:this.signTransaction,checkAddress:this.checkAddress}}render(){return o.a.createElement(d.a.Provider,{value:this.state},this.props.children)}}const v=i()(E.b,h.b);t.a=v(g)}).call(this,a(122).Buffer)},347:function(e,t,a){e.exports=a(602)},352:function(e,t,a){},51:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));var r=a(1),n=a.n(r);const s=n.a.createContext(),l=e=>t=>n.a.createElement(s.Consumer,null,a=>n.a.createElement(e,Object.assign({},t,{ledgerController:a})))},602:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(22),l=a.n(s),o=(a(352),a(11)),c=a.n(o),i=a(6),d=a(658),m=a(659),u=a(332),p=a(657),h=a(334),E=a(312),b=a.n(E),f=a(660),g=a(330),v=a(661),y=a(229),x=a.n(y),w=a(9),k=a(13);var A=function({disableGutterBottom:e,text:t,color:a}){const r={color:a||null};return n.a.createElement(u.a,{gutterBottom:!e,variant:"h6",style:r},t)},C=a(24),F=a(680);var S=Object(i.a)(e=>({errorText:{color:"red",fontSize:"13px",textAlign:"left"}}))(({accept:e,autoComplete:t=!1,autoFocus:a,classes:r,disabled:s=!1,displayError:l=!0,error:o=!1,fullWidth:c=!1,isNotFast:i,label:d,maxLength:m,multiline:u,name:p,onChange:h,onBlur:E,onKeyPress:b,margin:f,placeholder:g,shrink:v=!1,spellCheck:y=!1,step:x=!1,type:k="text",validate:A,width:S,dataCy:T="formTextField"})=>{const N=i?w.c:w.b;return n.a.createElement(n.a.Fragment,null,n.a.createElement(N,Object.assign({name:p},A?{validate:A}:{}),({field:r})=>n.a.createElement(F.a,Object.assign({},r,h?{onChange:h}:{},E?{onBlur:E}:{},{autoFocus:a,error:o,disabled:s,fullWidth:c,label:d,placeholder:g,type:k,multiline:u,onKeyPress:b,margin:f},{inputProps:Object(C.a)({autoComplete:t?"on":"off",maxLength:m,spellCheck:y},e?{accept:e}:{},{},x?{step:x}:{}),style:{width:S},InputLabelProps:Object(C.a)({},v?{shrink:v}:{}),"data-cy":T}))),l&&n.a.createElement(w.a,{name:p,render:e=>n.a.createElement("div",{className:r.errorText},e)}))});var T=Object(i.a)(e=>({}))((function(e){function t(e){"textarea"!==e.target.type&&13===e.which&&e.preventDefault()}return n.a.createElement(w.f,{initialValues:{host:"",port:""},onSubmit:(t,a)=>{e.handleCustomNode(t.host,t.port)},validationSchema:k.object().shape({host:k.string().required("Required"),port:k.string().required("Required")}),render:({isSubmitting:e,errors:a,touched:r})=>n.a.createElement(w.e,{onKeyPress:t},n.a.createElement(A,{text:"Custom Node Form",id:"modal-title"}),n.a.createElement(S,{error:!(!a.host||!r.host),name:"host",label:"Host",margin:"dense",fullWidth:!0,multiline:!0}),n.a.createElement(S,{error:!(!a.port||!r.port),name:"port",label:"Port",margin:"dense",fullWidth:!0,multiline:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(p.a,{type:"submit",disabled:e,variant:"contained",color:"primary"},"Submit"))})})),N=a(682),O=a(15),P=a(14);const j=n.a.createContext(),I=e=>t=>n.a.createElement(j.Consumer,null,a=>n.a.createElement(e,Object.assign({},t,{factomCliController:a})));var L=a(23),R=a(603);var W=Object(i.a)(e=>({modalContent:{position:"absolute",boxShadow:e.shadows[5],top:"50%",left:"50%",transform:"translate(-50%, -50%)",minHeight:"138px",padding:"30px",maxWidth:"425px"},menuText:{color:"white"}}))((function(e){const t=e.classes,a=Object(r.useState)(!1),s=Object(L.a)(a,2),l=s[0],o=s[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{className:t.menuText,onClick:()=>o(!0)},"Help"),n.a.createElement(N.a,{"aria-labelledby":"modal-title",open:l,onClose:()=>o(!1)},n.a.createElement(R.a,{className:t.modalContent,elevation:2},n.a.createElement(A,{text:"Help",id:"modal-title"}),n.a.createElement(u.a,null,"Please go to the #myfactomwallet channel on"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://discord.gg/79kH2pp"},"Discord"),"\xa0for support."),n.a.createElement("br",null),n.a.createElement(u.a,null,"Ledger Nano X/S documentation can be found"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://help.myfactomwallet.com/"},"here"),"."),n.a.createElement("br",null),n.a.createElement(u.a,null,"MyFactomWallet's Github repositories are"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/MyFactomWallet"},"here"),"."))))}));class B extends n.a.Component{constructor(...e){super(...e),this.state={networkAnchorEl:null,openCustomNodeForm:!1},this.handleOpenCustomNodeForm=()=>{this.setState({openCustomNodeForm:!0})},this.handleCloseCustomNodeForm=()=>{this.setState({openCustomNodeForm:!1})},this.handleNetworkClick=e=>{this.setState({networkAnchorEl:e.currentTarget})},this.handleNetworkClose=()=>{this.setState({networkAnchorEl:null})},this.handleTestnet=()=>{this.setState({networkAnchorEl:null}),this.props.walletController.handleNetworkChange("testnet")},this.handleMainnet=()=>{this.setState({networkAnchorEl:null}),this.props.walletController.handleNetworkChange("mainnet")},this.handleWallet=()=>{this.props.walletController.readyToManageWallet||this.props.walletController.isWalletEmpty()||this.props.walletController.setReadyToManageWallet(!0)},this.handleCustomNode=(e,t)=>{this.handleCloseCustomNodeForm()}}render(){const e=this.props,t=e.classes,a=e.networkController.networkProps,r=e.factomCliController,s=r.isConnected,l=r.error,o=r.blockHeight,c=e.disabled,i=e.greenConnection,E=this.state.networkAnchorEl,y="testnet"===a.network;return n.a.createElement(d.a,{position:"static",className:t.root,"data-cy":"appBarHeader"},n.a.createElement(m.a,{className:t.toolbar},n.a.createElement(h.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"},n.a.createElement(f.a,{to:"/"},n.a.createElement("img",{className:t.logo,src:b.a,alt:"logo"}))),n.a.createElement(u.a,{variant:"h6",className:t.flex},n.a.createElement(f.a,{className:t.menuText,to:"/"},"MyFactomWallet",y&&n.a.createElement("span",{className:t.testnetHeader,"data-cy":"testnetHeader"},"\xa0\xa0TESTNET"))),n.a.createElement(f.a,{to:"/"},n.a.createElement(p.a,{onClick:()=>{c||this.handleWallet()},className:t.menuText},"Wallet")),n.a.createElement(W,null),n.a.createElement(p.a,{"aria-owns":E?"simple-anchor-menu":null,"aria-haspopup":"true",onClick:e=>{c||this.handleNetworkClick(e)},className:y?t.testnetHeader:t.menuText},o?n.a.createElement("span",{"data-cy":"blockHeight"},o):n.a.createElement("div",{style:{width:48}}),"\xa0",s&&!l||i?n.a.createElement(x.a,{titleAccess:"Network Operational",className:t.connected}):n.a.createElement(n.a.Fragment,null,"?\xa0",n.a.createElement(x.a,{titleAccess:"Network Unavailable",className:t.notConnected}))),n.a.createElement(g.a,{id:"simple-anchor-menu",anchorEl:E,open:Boolean(E),onClose:this.handleNetworkClose},n.a.createElement(v.a,{onClick:this.handleMainnet,disabled:!y},"Connect to Mainnet"),n.a.createElement(v.a,{onClick:this.handleTestnet,disabled:y},"Connect to Testnet")),n.a.createElement(N.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.openCustomNodeForm,onClose:this.handleCloseCustomNodeForm},n.a.createElement("div",{className:t.modalContent},n.a.createElement(T,{handleCustomNode:this.handleCustomNode})))))}}var M=c()(P.b,I,O.b,Object(i.a)(e=>({root:{flexGrow:1,marginBottom:"15px"},toolbar:{width:"90%",margin:"0 auto"},flex:{flex:1},menuButton:{marginTop:3,marginRight:10},logo:{width:"39px"},menuText:{color:"white"},subMenuText:{color:"black"},modalContent:{position:"absolute",width:e.spacing(50),backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(4),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},testnetHeader:{color:"#ffa000"},connected:{color:"#0ec30e"},notConnected:{color:"red"}})))(B),D=a(687),H=a(329),V=a(662),K=a(691);const q=Object(H.a)({typography:{body1:{fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em"}}});var z=function(e){return function(t){return n.a.createElement(V.a,{theme:q},n.a.createElement(K.a,null),n.a.createElement(e,t))}},_=a(63),U=a(7),Y=a.n(U),X=a(8),G=a(97),J=a.n(G),$=a(29),Q=a.n($),Z=a(75),ee=a.n(Z),te=a(31),ae=a.n(te),re=a(317),ne=a.n(re),se=a(19),le=a(106),oe=a.n(le);const ce=/^\d*[.]{0,1}\d{0,8}$/,ie=e=>{const t=new oe.a(e).times(1e8);return parseFloat(t)},de=e=>{const t=new oe.a(e).times(1e-8);return parseFloat(t)},me=(e,t)=>{const a=new oe.a(e).plus(t);return parseFloat(a)},ue=(e,t)=>{const a=new oe.a(e).minus(t);return parseFloat(a)},pe=["importType","address","nickname","index","saveLocally"];class he extends n.a.Component{constructor(e){var t;super(e),t=this,this.smartSetState=(e,t=ee.a)=>new Promise(a=>this.setState(e,J()([t,a]))),this.saveStateToLocalStorage=()=>{const e=e=>e.filter(e=>e.saveLocally).map(e=>ne()(e,pe)),t=Object(C.a)({},this.state.addresses),a=t.mainnet,r=t.testnet,n={mainnet:{fct:e(a.fct),ec:e(a.ec)},testnet:{fct:e(r.fct),ec:e(r.ec)}};localStorage.setItem("storageAddresses",JSON.stringify(n))},this.hydrateStateWithLocalStorage=Object(X.a)(Y.a.mark((function e(){var a,r,n,s,l,o,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(localStorage.getItem("storageAddresses")),ae()(a)){e.next=14;break}return r=e=>e.map(e=>Object(C.a)({},e,{balance:null,transactions:[],pendingAddressCallback:a=>{t.pendingTransactionListener(a,e.address)}})),n=a.mainnet,s=a.testnet,l=r(n.fct),o=r(s.fct),c={mainnet:{fct:l,ec:r(n.ec)},testnet:{fct:o,ec:r(s.ec)}},e.next=9,t.smartSetState(e=>({addresses:c}));case 9:return e.next=11,t.setDefaultIndex();case 11:return e.next=13,t.updateBalances({force:!0});case 13:t.addNetworkPendingTransactionListeners();case 14:return e.next=16,t.smartSetState({readyToManageWallet:!t.isWalletEmpty()});case 16:return e.next=18,t.smartSetState({isStateHydrated:!0});case 18:case"end":return e.stop()}}),e)}))),this.addNetworkPendingTransactionListeners=()=>{const e=this.props.networkController.networkProps.network,t=[...this.state.addresses[e].fct];t.length>0&&this.addPendingTransactionEmitter(t)},this.removeNetworkPendingTransactionListeners=()=>{const e=this.props.networkController.networkProps.network,t=[...this.state.addresses[e].fct];t.length>0&&this.removePendingTransactionEmitter(t)},this.setReadyToManageWallet=e=>{this.smartSetState({readyToManageWallet:e})},this.handleNetworkChange=function(){var e=Object(X.a)(Y.a.mark((function e(a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.removeNetworkPendingTransactionListeners(),e.next=3,t.smartSetState({isStateHydrated:!1});case 3:return e.next=5,t.props.networkController.changeNetwork(a);case 5:return e.next=7,t.props.factomCliController.connectToServer();case 7:t.hydrateStateWithLocalStorage();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteAddress=function(){var e=Object(X.a)(Y.a.mark((function e(a){var r,n,s,l,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.type,n=a.index,s=t.props.networkController.networkProps.network,l=[...t.state.addresses[s][r]],o=l[n],l.splice(a.index,1),e.next=8,t.smartSetState(e=>({addresses:Object(C.a)({},e.addresses,{[s]:Object(C.a)({},e.addresses[s],{[r]:[...l]})})}));case 8:return e.next=10,t.setDefaultIndex();case 10:t.saveStateToLocalStorage(),t.removePendingTransactionEmitter([o]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addAddressTransaction=(e,t)=>{const a=e.type,r=e.index,n=this.props.networkController.networkProps.network,s=[...this.state.addresses[n][a]],l=s[r];return l.transactions.push(t),s[e.index]=l,this.smartSetState(e=>({addresses:Object(C.a)({},e.addresses,{[n]:Object(C.a)({},e.addresses[n],{[a]:[...s]})})}))},this.updateAddress=function(){var e=Object(X.a)(Y.a.mark((function e(a,r,n){var s,l,o,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.type,l=t.props.networkController.networkProps.network,o=[...t.state.addresses[l][s]],(c=Object(C.a)({},o[a.index])).nickname=r,c.saveLocally=n,o[a.index]=c,e.next=9,t.smartSetState(e=>({addresses:Object(C.a)({},e.addresses,{[l]:Object(C.a)({},e.addresses[l],{[s]:[...o]})})}));case 9:t.saveStateToLocalStorage();case 10:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),this.isWalletEmpty=()=>{const e=this.props.networkController.networkProps.network;return Q()(this.state.addresses[e].fct)&&Q()(this.state.addresses[e].ec)},this.setDefaultIndex=()=>Q()(this.getFactoidAddresses())?Q()(this.getEntryCreditAddresses())?this.smartSetState({activeAddressIndex_o:null}):this.selectAddress(0,"ec"):this.selectAddress(0,"fct"),this.verifyKey=(e,{address:t})=>{try{return Object(se.getPublicAddress)(e).valueOf()===t.valueOf()}catch(a){return!1}},this.addAddress=(e,t)=>{this.addAddresses([e],t),this.selectAddress(this.getNextIndex(t),t)},this.addAddresses=function(){var e=Object(X.a)(Y.a.mark((function e(a,r){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.networkController.networkProps.network,e.next=3,t.smartSetState(e=>({addresses:Object(C.a)({},e.addresses,{[n]:Object(C.a)({},e.addresses[n],{[r]:[...e.addresses[n][r],...a]})})}));case 3:return e.next=5,t.setDefaultIndex();case 5:return e.next=7,t.updateBalances();case 7:t.addPendingTransactionEmitter(a);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getNextIndex=e=>{let t=0;return"fct"===e?t=this.getFactoidAddresses().length-1:"ec"===e&&(t=this.getEntryCreditAddresses().length-1),t},this.selectAddress=(e,t)=>this.smartSetState({activeAddressIndex_o:{index:e,type:t}}),this.getActiveAddress=()=>{if(null!==this.state.activeAddressIndex_o){const e=this.props.networkController.networkProps.network;return this.state.addresses[e][this.state.activeAddressIndex_o.type][this.state.activeAddressIndex_o.index]}return null},this.getFactoidAddresses=()=>this.getAddresses("fct"),this.getEntryCreditAddresses=()=>this.getAddresses("ec"),this.getAddresses=e=>{const t=this.props.networkController.networkProps.network;return this.state.addresses[t][e]},this.updateWalletBalance=function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0,e.abrupt("return",Object(C.a)({},t,{balance:0}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addPendingTransactionEmitter=e=>{e&&e.forEach(e=>{this.props.factomCliController.factomEmitter.on(se.FactomEventEmitter.getSubscriptionToken({eventType:"newPendingTransaction",topic:e.address}),e.pendingAddressCallback)})},this.removePendingTransactionEmitter=e=>{e&&e.forEach(e=>{this.props.factomCliController.factomEmitter.removeListener(se.FactomEventEmitter.getSubscriptionToken({eventType:"newPendingTransaction",topic:e.address}),e.pendingAddressCallback)})},this.pendingTransactionListener=function(){var e=Object(X.a)(Y.a.mark((function e(a,r){var n,s,l,o,c,i,d,m;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props.networkController.networkProps.network,s=t.state.addresses[n].fct,l=Object(_.a)(s.entries()),e.prev=3,l.s();case 5:if((o=l.n()).done){e.next=15;break}if(c=Object(L.a)(o.value,2),i=c[0],(d=c[1]).address!==r){e.next=12;break}return e.next=10,t.updateWalletBalance(d);case 10:m=e.sent,s[i]=m;case 12:t.smartSetState(e=>({addresses:Object(C.a)({},e.addresses,{[n]:Object(C.a)({},e.addresses[n],{fct:s})})}));case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),l.e(e.t0);case 20:return e.prev=20,l.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})));return function(t,a){return e.apply(this,arguments)}}(),this.updateBalances=function(){var e=Object(X.a)(Y.a.mark((function e({force:a=!1}={}){var r,n,s,l,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.isStateHydrated&&!a){e.next=9;break}return r=t.props.networkController.networkProps.network,e.next=4,Promise.all([Promise.all(t.state.addresses[r].fct.map(t.updateWalletBalance)),Promise.all(t.state.addresses[r].ec.map(t.updateWalletBalance))]);case 4:return n=e.sent,s=Object(L.a)(n,2),l=s[0],o=s[1],e.abrupt("return",t.smartSetState(e=>({addresses:Object(C.a)({},e.addresses,{[r]:Object(C.a)({},e.addresses[r],{ec:o,fct:l})})})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.getEntryCreditRate=Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.factomCliController.factomCli.getEntryCreditRate();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getFactoshiFee=Object(X.a)(Y.a.mark((function e(){var a,r,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEntryCreditRate();case 2:return a=e.sent,r="FA3E6enA33y9f5K9q9nrWfcDNrVR4zAp4xpniizNjQbV4RAmPjat",n=se.Transaction.builder().input(r,Number.MAX_SAFE_INTEGER).output(r,Number.MAX_SAFE_INTEGER).build().computeRequiredFees(a,{rcdType:1}),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),this.getFactoidFee=Object(X.a)(Y.a.mark((function e(){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFactoshiFee();case 2:return a=e.sent,e.abrupt("return",de(a));case 4:case"end":return e.stop()}}),e)}))),this.newStandardAddress=(e,t)=>({importType:"standard",address:e,balance:null,nickname:t,pendingAddressCallback:t=>{this.pendingTransactionListener(t,e)},transactions:[],saveLocally:!1}),this.newSeedAddress=(e,t,a)=>({importType:"seed",address:e,balance:null,nickname:t,transactions:[],index:a,pendingAddressCallback:t=>{this.pendingTransactionListener(t,e)},saveLocally:!1}),this.newLedgerAddress=(e,t,a)=>({importType:"ledger",address:e,balance:null,nickname:t,transactions:[],index:a,pendingAddressCallback:t=>{this.pendingTransactionListener(t,e)},saveLocally:!1}),this.state={addresses:{mainnet:{fct:[],ec:[]},testnet:{fct:[],ec:[]}},activeAddressIndex_o:null,isStateHydrated:!1,readyToManageWallet:!1,setReadyToManageWallet:this.setReadyToManageWallet,isWalletEmpty:this.isWalletEmpty,handleNetworkChange:this.handleNetworkChange,verifyKey:this.verifyKey,updateAddress:this.updateAddress,addAddressTransaction:this.addAddressTransaction,deleteAddress:this.deleteAddress,getAddresses:this.getAddresses,getFactoidAddresses:this.getFactoidAddresses,getEntryCreditAddresses:this.getEntryCreditAddresses,addAddresses:this.addAddresses,addAddress:this.addAddress,selectAddress:this.selectAddress,getActiveAddress:this.getActiveAddress,updateWalletBalance:this.updateWalletBalance,updateBalances:this.updateBalances,getEntryCreditRate:this.getEntryCreditRate,getFactoshiFee:this.getFactoshiFee,getFactoidFee:this.getFactoidFee,newStandardAddress:this.newStandardAddress,newSeedAddress:this.newSeedAddress,newLedgerAddress:this.newLedgerAddress}}componentDidMount(){var e=this;return Object(X.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.hydrateStateWithLocalStorage();case 1:case"end":return t.stop()}}),t)})))()}render(){return this.state.isStateHydrated?n.a.createElement(O.a.Provider,{value:this.state},this.props.children):null}}var Ee=c()(P.b,I)(he);const be=n.a.createContext(),fe=e=>t=>n.a.createElement(be.Consumer,null,a=>n.a.createElement(e,Object.assign({},t,{seedController:a})));var ge=a(64),ve=a.n(ge);const ye=e=>Object(se.getPublicAddress)(Object(se.seedToPrivateFctAddress)(e)),xe=e=>Object(se.getPublicAddress)(Object(se.seedToPrivateEcAddress)(e));class we extends n.a.Component{constructor(e){var t;super(e),t=this,this.getSeedAddresses=function(){var e=Object(X.a)(Y.a.mark((function e(a,r,n,s){var l,o,c,i,d,m,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=[],o=t.props.networkController.networkProps.bip32Account,c=new ve.a.FactomBIP44(a),i=r;i<r+n;i++)d=null,m=null,"fct"===s?(d=c.generateFactoidPrivateKey(o,0,i),m=ye(d)):"ec"===s&&(d=c.generateEntryCreditPrivateKey(o,0,i),m=xe(d)),l.push({address:m,index:i});return e.next=6,Promise.all(l.map(t.props.walletController.updateWalletBalance));case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),this.signWithSeed=function(){var e=Object(X.a)(Y.a.mark((function e({mnemonic:a,index:r,toAddr:n,amount:s,type:l}){var o,c,i,d;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={},c=t.props.networkController.networkProps.bip32Account,i=new ve.a.FactomBIP44(a),d=Object(se.seedToPrivateFctAddress)(i.generateFactoidPrivateKey(c,0,r)),"sendFCT"!==l){e.next=10;break}return e.next=7,t.props.factomCliController.factomCli.createFactoidTransaction(d,n,s);case 7:o=e.sent,e.next=14;break;case 10:if("convertFCT"!==l){e.next=14;break}return e.next=13,t.props.factomCliController.factomCli.createEntryCreditPurchaseTransaction(d,n,s);case 13:o=e.sent;case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.verifySeed=(e,{address:t,index:a})=>{try{const r=new ve.a.FactomBIP44(e),n=this.props.networkController.networkProps.bip32Account;let s=null;return Object(se.isValidPublicFctAddress)(t)?s=ye(r.generateFactoidPrivateKey(n,0,a)):Object(se.isValidPublicEcAddress)(t)&&(s=xe(r.generateEntryCreditPrivateKey(n,0,a))),s.valueOf()===t.valueOf()}catch(r){return!1}},this.getPrivateKey=(e,{address:t,index:a})=>{const r=this.props.networkController.networkProps.bip32Account,n=new ve.a.FactomBIP44(e);let s=null;if(Object(se.isValidPublicFctAddress)(t)){const e=n.generateFactoidPrivateKey(r,0,a);s=Object(se.seedToPrivateFctAddress)(e)}else if(Object(se.isValidPublicEcAddress)(t)){const e=n.generateEntryCreditPrivateKey(r,0,a);s=Object(se.seedToPrivateEcAddress)(e)}return s},this.state={getSeedAddresses:this.getSeedAddresses,signWithSeed:this.signWithSeed,verifySeed:this.verifySeed,getRandomMnemonic:this.getRandomMnemonic,getPrivateKey:this.getPrivateKey}}getRandomMnemonic(){return ve.a.randomMnemonic()}render(){return n.a.createElement(be.Provider,{value:this.state},this.props.children)}}var ke=c()(O.b,P.b,I)(we),Ae=a(230),Ce=a.n(Ae);class Fe extends n.a.Component{constructor(e){var t;super(e),t=this,this.defaultConnectionParams={path:"/v2",debugPath:"/debug",protocol:"https",rejectUnauthorized:!0,retry:{retries:4,factor:2,minTimeout:500,maxTimeout:2e3}},this.getDefaultConnectionParams=()=>{const e={host:this.props.networkController.networkProps.apiHost,port:this.props.networkController.networkProps.apiPort};return Ce()(this.defaultConnectionParams,e)},this.newFactomCli=e=>new se.FactomCli(Ce()(this.defaultConnectionParams,e)),this.newFactomEmitter=e=>new se.FactomEventEmitter(e,{interval:1e4}),this.updateBlock=e=>{const t=e.height;this.setState({blockHeight:t})},this.connectToServer=Object(X.a)(Y.a.mark((function e(){var a,r,n,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.smartSetState({isConnected:!1,blockHeight:null});case 2:return t.state.factomEmitter&&t.state.factomEmitter.removeListener("newDirectoryBlock",t.updateBlock),a={host:t.props.networkController.networkProps.apiHost,port:t.props.networkController.networkProps.apiPort},r=t.newFactomCli(a),e.prev=5,e.next=8,r.factomdApi("properties",null,{timeout:9e3,retry:{retries:0}});case 8:if(!e.sent){e.next=20;break}return n=t.newFactomEmitter(r),e.next=12,t.smartSetState({factomCli:r,factomEmitter:n});case 12:return e.next=14,t.state.factomCli.getDirectoryBlockHead();case 14:return s=e.sent,t.updateBlock(s),e.next=18,t.state.factomEmitter.on("newDirectoryBlock",t.updateBlock);case 18:return e.next=20,t.smartSetState({isConnected:!0});case 20:e.next=28;break;case 22:return e.prev=22,e.t0=e.catch(5),console.log("Error connecting to server."),console.log(e.t0),e.next=28,t.smartSetState({error:!0});case 28:case"end":return e.stop()}}),e,null,[[5,22]])}))),this.smartSetState=(e,t=ee.a)=>new Promise(a=>this.setState(e,J()([t,a]))),this.state={connectToServer:this.connectToServer,blockHeight:null,isConnected:!1,error:!1}}componentDidMount(){var e=this;return Object(X.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connectToServer();case 2:case"end":return t.stop()}}),t)})))()}render(){return n.a.createElement(j.Provider,{value:this.state},this.props.children)}}var Se=c()(P.b)(Fe);class Te extends n.a.Component{constructor(e){var t;super(e),t=this,this.networkProps={mainnet:{network:"mainnet",bip32Account:0,factoidAbbreviation:"FCT",factoidAbbreviationFull:"Factoid",ecAbbreviation:"EC",ecAbbreviationFull:"Entry Credit",apiPort:443,apiHost:"api.factomd.net",explorerURL:"https://explorer.factom.pro",transactionUrlSuffix:"/transactions/"},testnet:{network:"testnet",bip32Account:2147483647,factoidAbbreviation:"TTS",factoidAbbreviationFull:"Testoid",ecAbbreviation:"TC",ecAbbreviationFull:"Test Credit",apiPort:8288,apiHost:"api.myfactomwallet.com",explorerURL:"https://testnet.explorer.factom.pro",transactionUrlSuffix:"/transactions/"}},this.changeNetwork=function(){var e=Object(X.a)(Y.a.mark((function e(a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.smartSetState({networkProps:t.networkProps[a]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.smartSetState=(e,t=ee.a)=>new Promise(a=>this.setState(e,J()([t,a]))),this.state={networkProps:this.networkProps.mainnet,changeNetwork:this.changeNetwork}}render(){return n.a.createElement(P.a.Provider,{value:this.state},this.props.children)}}var Ne=Te,Oe=a(318),Pe=a(331),je=a(663),Ie=a(664),Le=a(665),Re=a(688),We=a(79),Be=a.n(We);function Me(e){const t=e.handleClose,a=Object(Pe.a)(e,["handleClose"]);return n.a.createElement(Re.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,"aria-labelledby":"confirmation-dialog-title"},a),n.a.createElement(je.a,{align:"center",style:{backgroundColor:"#f50057"}},n.a.createElement(Be.a,{fontSize:"large"})),n.a.createElement(Ie.a,null,n.a.createElement("br",null),n.a.createElement(u.a,{variant:"h5",align:"center"},"Important"),n.a.createElement("br",null),n.a.createElement(u.a,null,"The Factom Protocol has been upgraded to The Accumulate Network. This website currently has not been upgraded to support the new protocol. You may still use this site to extract your keys from your mnemonic phrase, however you cannot currently perform any transactions or query balances. You may manually enter your FA address into https://explorer.accumulatenetwork.io to see your converted FCT to ACME balance.",n.a.createElement("br",null),"MyFactomWallet.com is a client-side interface wallet. We provide the user with access to the Factom blockchain, but we do not store, control or have access to ANY user wallet or blockchain information including keys or transaction data. Therefore,\xa0",n.a.createElement("b",null,"we cannot reverse transactions or recover funds."),"\xa0 MyFactomWallet.com is not a bank or a custodian. Your assets and your security are entirely your own responsibility. By using MyFactomWallet.com and/or by clicking 'accept' at the bottom, you agree to the following notices:"),n.a.createElement(u.a,{variant:"h5",align:"center"},"Notices"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(u.a,null,"This project is under active development; there is always the possibility something unexpected happens that causes your funds to be lost, including but not limited to third party domain attacks."," ",n.a.createElement("b",null,"We are not responsible for any loss."))),n.a.createElement("li",null,n.a.createElement(u.a,null,"Never send funds from a mainnet address to a testnet address and vice versa. Sending Factoids to the testnet will likely result in a loss of factoids. You acknowledge that testnet Testoids and Test Credits have no value.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"When you create new Factoid or Entry Credit addresses on MyFactomWallet.com, a random 12-word cryptographic seed phrase is generated in the browser, and is used to generate new addresses and sign transactions.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"The handling of your private keys or seed phrase is solely your responsibility. It happens entirely on your computer, inside your browser.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"We never transmit, receive or store your private keys or seeds.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"We do not charge a transaction fee (blockchain fees still apply).")),n.a.createElement("li",null,n.a.createElement(u.a,null,"We are not a custodian and have no information about or control over your Factoids or Entry Credits.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"You are simply using our interface to interact directly with the blockchain.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"If you provide your public key (address) to someone, they can transfer Factoids to you.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"If you provide your private key or seed phrase to a person or entity, then that person or entity has full control of your account, and may withdraw your funds.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"We are not a custodian. Your funds are stored on the blockchain and protected by your private key and/or seed phrase. As explained above, your private key is solely your responsibility and MyFactomWallet.com does not store or have access to any of your keys.")),n.a.createElement("li",null,n.a.createElement(u.a,null,'Offered under MIT License Copyright \xa9 2015-2018: THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.'))),n.a.createElement(u.a,{variant:"h5",align:"center"},"Important Tips"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(u.a,null,"Never hand-type your public or private address.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Always send a small amount of Factoids first to ensure that the transaction is processed correctly and the Factoids end up in the correct address. After verifying this, you may send the full amount of Factoids.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"If you generated a new Factoid or Entry Credit address in MyFactomWallet.com; save and back up the associated seed BEFORE you send any funds to it.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Do not post your private key or seed on any social media, chat-platforms, email/sms it, or store it in any cloud storage service (Google Drive, Dropbox etc).")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Use a hardware wallet for added protection (Ledger Nano X/S supported at this time).")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Regularly monitor the security of your computer operating system to ensure that it is not compromised by malicious software whereby unauthorized third parties may obtain your private key or seed.")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Ensure that you are not on a phishing site, but have landed on the correct page (verify that you are on https://www.myfactomwallet.com in the browser, and also check that the \u201clock\u201d symbol is displayed in the Chrome address bar).")),n.a.createElement("li",null,n.a.createElement(u.a,null,"The user must understand that MyFactomWallet.com CANNOT:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(u.a,null,"Access your wallet or send your funds for you")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Recover or change your private key or seed")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Reverse, cancel, or refund any transactions")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Freeze FCT or Entry Credit addresses")))))),n.a.createElement(Le.a,null,n.a.createElement(p.a,{"data-cy":"disclaimer-accept",onClick:t,color:"primary"},"Accept")))}var De=function(e){const t=Object(r.useState)(!0),a=Object(L.a)(t,2),s=a[0],l=a[1];return n.a.createElement(Me,{open:s,handleClose:function(){l(!1)}})};var He=c()(P.b,Object(i.a)(e=>({appBar:{top:"auto",bottom:0,minHeight:78,paddingTop:9,backgroundColor:"#ffa000"},toolbar:{marginLeft:"auto",marginRight:"auto"},warningIcon:{fontSize:52},toolbarSpace:{height:85}})))((function(e){const t=e.classes;return"testnet"===e.networkController.networkProps.network?n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null),n.a.createElement("div",{className:t.toolbarSpace}),n.a.createElement(d.a,{position:"fixed",className:t.appBar},n.a.createElement(m.a,{className:t.toolbar},n.a.createElement(Be.a,{className:t.warningIcon}),n.a.createElement(u.a,{"data-cy":"testnetWarning",variant:"h3"},"You are connected to the Factom ",n.a.createElement("b",null,"Testnet")),"\xa0",n.a.createElement(Be.a,{className:t.warningIcon})))):null})),Ve=a(689),Ke=a(690),qe=a(656),ze=a(604),_e=a(692),Ue=a(674),Ye=a(685),Xe=a(12),Ge=a.n(Xe),Je=a(684),$e=a(694),Qe=a(666),Ze=a(652),et=a(653);var tt=c()(P.b,Object(i.a)(e=>({errorText:{color:"red"}})))((function(e){const t=e.classes,a=e.importType,r=e.networkController.networkProps;return n.a.createElement(w.f,{initialValues:{importType:a},onSubmit:(t,a)=>{e.handleNext()},validationSchema:k.object().shape({importType:k.string().required("Required")}),render:({values:a,handleChange:s,isSubmitting:l,errors:o,touched:c})=>n.a.createElement(w.e,null,n.a.createElement(Ze.a,{error:!(!Ge()(o,"importType")||!Ge()(c,"importType")),component:"fieldset"},n.a.createElement(et.a,{component:"legend"},"How would you like to add a new address?",n.a.createElement(w.a,{name:"importType",render:()=>n.a.createElement("span",{className:t.errorText},"\xa0*")})),n.a.createElement($e.a,{"aria-label":"Import Type",name:"importType",value:Ge()(a,"importType"),onChange:t=>{s(t),e.updateImportType(t.target.value)}},(e=>[{value:"fct",label:"Import "+e.factoidAbbreviationFull+" Address"},{value:"ec",label:"Import "+e.ecAbbreviationFull+" Address"},{value:"new",label:"Generate new 12-word seed"},{value:"importSeed",label:"Import addresses from mnemonic seed phrase"},{value:"ledger",label:"Import addresses from Ledger Nano X/S"}])(r).map((e,t)=>n.a.createElement(Qe.a,{key:t,value:e.value,control:n.a.createElement(Je.a,null),label:e.label,disabled:e.disabled})))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(p.a,{disabled:!0},"Back"),n.a.createElement(p.a,{type:"submit",disabled:l,variant:"contained",color:"primary","data-cy":"next"},"Next")))})})),at=a(105),rt=a.n(at);var nt=c()(P.b,O.b,Object(i.a)(e=>({})))((function(e){const t=e.walletController,a=t.getFactoidAddresses,r=t.newStandardAddress,s=t.addAddress,l=e.networkController.networkProps,o=a();return n.a.createElement(w.f,{initialValues:{factoidAddress:"",nickname:""},onSubmit:(t,a)=>{const n=r(Ge()(t,"factoidAddress"),Ge()(t,"nickname").trim());s(n,"fct"),e.handleNext()},validationSchema:k.object().shape({factoidAddress:k.string().required("Required").test("factoidAddress","Invalid Address",se.isValidPublicFctAddress).test("factoidAddress","Enter unique address",e=>-1===rt()(o,["address",e])),nickname:k.string().trim().required("Required").test("nickname","Enter unique nickname",e=>-1===rt()(o,["nickname",e]))}),render:({isSubmitting:t,errors:a,touched:r})=>n.a.createElement(w.e,null,n.a.createElement(S,{error:!(!a.factoidAddress||!r.factoidAddress),name:"factoidAddress",label:"Public "+l.factoidAbbreviationFull+" Address",maxLength:52,margin:"dense",fullWidth:!0}),n.a.createElement(S,{error:!(!a.nickname||!r.nickname),name:"nickname",label:"Nickname",maxLength:25,margin:"dense",fullWidth:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(p.a,{onClick:e.handleBack},"Back"),n.a.createElement(p.a,{type:"submit",disabled:t,variant:"contained",color:"primary"},"Submit")))})}));var st=c()(P.b,O.b,Object(i.a)(e=>({})))((function(e){const t=e.walletController,a=t.getEntryCreditAddresses,r=t.newStandardAddress,s=t.addAddress,l=e.networkController.networkProps,o=a();return n.a.createElement(w.f,{initialValues:{entryCreditAddress:"",nickname:""},onSubmit:(t,a)=>{const n=r(Ge()(t,"entryCreditAddress"),Ge()(t,"nickname").trim());s(n,"ec"),e.handleNext()},validationSchema:k.object().shape({entryCreditAddress:k.string().required("Required").test("entryCreditAddress","Invalid Address",se.isValidPublicEcAddress).test("entryCreditAddress","Enter unique address",e=>-1===rt()(o,["address",e])),nickname:k.string().trim().required("Required").test("nickname","Enter unique nickname",e=>-1===rt()(o,["nickname",e]))}),render:({isSubmitting:t,errors:a,touched:r})=>n.a.createElement(w.e,null,n.a.createElement(S,{error:!(!a.entryCreditAddress||!r.entryCreditAddress),name:"entryCreditAddress",label:"Public "+l.ecAbbreviationFull+" Address",maxLength:52,margin:"dense",fullWidth:!0}),n.a.createElement(S,{error:!(!a.nickname||!r.nickname),name:"nickname",label:"Nickname",maxLength:25,margin:"dense",fullWidth:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(p.a,{onClick:e.handleBack},"Back"),n.a.createElement(p.a,{type:"submit",disabled:t,variant:"contained",color:"primary"},"Submit")))})}));class lt extends n.a.Component{constructor(...e){super(...e),this.state={step:1},this.nextStep=()=>{this.setState({step:2})}}componentDidMount(){this.props.setMnemonic(this.props.seedController.getRandomMnemonic())}render(){const e=this.props.classes;return n.a.createElement(w.f,{initialValues:{mnemonic:""},onSubmit:(e,t)=>{this.props.handleNext()},validationSchema:k.object().shape({mnemonic:k.string().trim().required("Required").oneOf([this.props.mnemonic],"Seed does not match")}),render:({isSubmitting:t,errors:a,touched:r})=>n.a.createElement(w.e,{style:{width:"500px"},autoComplete:"nope",autoComplete:"off"},1===this.state.step&&n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{style:{fontWeight:500},className:e.warningText},"Write down your seed carefully on a piece of paper. This seed provides access to all the derived addresses. If you lose this seed, you will lose access to your addresses forever!"),n.a.createElement("br",null),n.a.createElement(u.a,{style:{fontWeight:500}},"Seed Phrase:"),n.a.createElement(u.a,{"data-cy":"mnemonic"},this.props.mnemonic)),2===this.state.step&&n.a.createElement(S,{error:!(!Ge()(a,"mnemonic")||!Ge()(r,"mnemonic")),name:"mnemonic",label:"Verify Seed Phrase",autoFocus:!0,margin:"dense",fullWidth:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(p.a,{onClick:()=>{this.props.setMnemonic(null),this.props.handleBack()}},"Back"),1===this.state.step&&n.a.createElement(p.a,{onClick:this.nextStep,variant:"contained",color:"primary"},"Verify Seed"),2===this.state.step&&n.a.createElement(p.a,{type:"submit",disabled:t,variant:"contained",color:"primary"},"Next")))})}}var ot=c()(fe,Object(i.a)(e=>({warningText:{color:"red",fontSize:"15px"}})))(lt),ct=a(51),it=a(667),dt=a(670),mt=a(673),ut=a(668),pt=a(669),ht=a(672),Et=a(693),bt=a(686),ft=a(671);const gt=e=>{const t=e.networkProps,a=e.balance;let r="";const s=de(parseInt(a,10));return r=n.a.createElement("span",null,s.toLocaleString(void 0,{maximumFractionDigits:8}),"\xa0\xa0",t.factoidAbbreviation),r},vt=e=>{const t=e.networkProps,a=e.balance;let r="";const s=parseInt(a,10);return r=n.a.createElement("span",null,s,"\xa0\xa0",t.ecAbbreviation),r};var yt=e=>{const t=Object(r.useContext)(P.a).networkProps,a=e.balance,s=e.type;return"fct"===s?n.a.createElement(gt,{balance:a,networkProps:t}):"ec"===s?n.a.createElement(vt,{balance:a,networkProps:t}):void 0};const xt=Object(i.a)(e=>({head:{color:"black",fontSize:"13px",paddingLeft:5,paddingRight:5},body:{paddingLeft:5,paddingRight:5}}))(mt.a);var wt=Object(i.a)(e=>({root:{width:"800px",marginTop:12,overflowX:"auto",maxHeight:405},head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},errorText:{color:"red",fontSize:"20px"},errorTextSmall:{color:"red",fontSize:"12px"}}))((function(e){const t=Object(r.useState)(!1),a=Object(L.a)(t,2),s=a[0],l=a[1];function o(t){const a=e.userAddressList.map(e=>e.nickname);let r;return t?-1!==a.indexOf(t.trim())&&(r="Enter unique nickname"):r="Required",r}function c(){return(c=Object(X.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,e.getNextFive();case 3:l(!1);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const i=e.classes,d=e.generatedAddressList,m=e.userAddressList,h=e.values,E=e.errors,b=e.touched,f=e.setFieldValue,g=e.handleChange,v=e.type,y=e.title,x=m.map(e=>e.address);return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{variant:"h6"},y),n.a.createElement(w.a,{name:"addresses",render:e=>n.a.createElement("span",{className:i.errorText},n.a.createElement("br",null),e)}),n.a.createElement(R.a,{className:i.root,elevation:2},n.a.createElement(it.a,{size:"small"},n.a.createElement(ut.a,null,n.a.createElement(pt.a,null,n.a.createElement(xt,null),n.a.createElement(xt,null,"Address"),n.a.createElement(xt,null,"Balance"),n.a.createElement(xt,null,"Nickname"))),n.a.createElement(dt.a,null,!Q()(d)&&d.map((t,a)=>{const r="checkbox_"+a,s="nickname_"+a,l="address_"+a,c="balance_"+a,d=-1!==x.indexOf(t.address);return n.a.createElement(pt.a,{key:a},n.a.createElement(w.d,{name:"addresses",render:u=>n.a.createElement(n.a.Fragment,null,n.a.createElement(xt,null,d?n.a.createElement(Et.a,{title:"Address already added"},n.a.createElement(Qe.a,{control:n.a.createElement(bt.a,{checked:!0,disabled:!0,name:r,color:"primary"}),label:a+1,labelPlacement:"start"})):n.a.createElement(w.c,{name:r,render:({field:e,form:t})=>n.a.createElement(Qe.a,{control:n.a.createElement(bt.a,{name:r,color:"primary",onChange:e=>{u.replace(a,null),f(s,""),g(e)}}),label:a+1,labelPlacement:"start"})})),n.a.createElement(xt,{name:l},t.address),n.a.createElement(xt,{name:c},n.a.createElement(yt,{balance:t.balance,type:v})),n.a.createElement(xt,null,d?m.find(e=>e.address===t.address).nickname:n.a.createElement(n.a.Fragment,null,Ge()(h,r)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(w.c,{name:s,validate:o},({field:r})=>n.a.createElement(F.a,Object.assign({},r,{onChange:r=>{g(r),function(t,a,r,n){if(t){const s=e.newAddress(a.address,t.trim(),r);n.replace(r,s)}else n.replace(r,null)}(r.target.value,t,a,u)},autoFocus:!0,margin:"dense",fullWidth:!0,error:!(!E[s]||!b[s]),inputProps:{maxLength:25}}))),n.a.createElement(w.a,{name:s,render:e=>n.a.createElement("span",{className:i.errorTextSmall},e)})))))}))}),n.a.createElement(pt.a,null,n.a.createElement(xt,null),n.a.createElement(xt,null,n.a.createElement(p.a,{type:"button",onClick:function(){return c.apply(this,arguments)},variant:"outlined",color:"primary",disabled:s},Q()(d)?"Loading":"Load Five More",(s||Q()(d))&&n.a.createElement(n.a.Fragment,null,"\xa0",n.a.createElement(ft.a,{thickness:5,size:15})))))),n.a.createElement(ht.a,null))))}));const kt=e=>({fct:"Ledger Nano X/S "+e.factoidAbbreviationFull+" Addresses",ec:"Ledger Nano X/S "+e.ecAbbreviationFull+" Addresses"});class At extends n.a.Component{constructor(e){var t;super(e),t=this,this.retryConnection=()=>{this.setState({ledgerStatus:null}),this.getNextFive()},this.getNextFive=Object(X.a)(Y.a.mark((function e(){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.props.ledgerController.getLedgerAddresses(t.state.generatedAddressList.length,5,t.props.type);case 3:return a=e.sent,e.next=6,Promise.all(a.map(t.props.walletController.updateWalletBalance));case 6:r=e.sent,t.setState(e=>({generatedAddressList:[...e.generatedAddressList,...r],ledgerConnected:!0})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.setState({ledgerStatus:"Ledger Nano X/S not found. Troubleshooting tips:",ledgerConnected:!1});case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),this.hasAddressSelected=e=>Object.keys(e).filter(e=>e.startsWith("checkbox")).some(t=>e[t]),this.state={generatedAddressList:[],ledgerConnected:!1,ledgerStatus:null}}componentDidMount(){this.getNextFive()}render(){var e=this;const t=this.props,a=t.type,r=t.walletController,s=r.getAddresses,l=r.addAddresses,o=r.newLedgerAddress,c=t.networkController.networkProps;let i=s(a);return n.a.createElement(w.f,{enableReinitialize:!0,initialValues:{addresses:[],ledgerConnected:this.state.ledgerConnected,ledgerStatus:this.state.ledgerStatus},onSubmit:function(){var t=Object(X.a)(Y.a.mark((function t(a,r){var n,s,o,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],s=Object(_.a)(Ge()(a,"addresses"));try{for(s.s();!(o=s.n()).done;)c=o.value,ae()(c)||n.push(c)}catch(r){s.e(r)}finally{s.f()}l(n,e.props.type),e.props.handleNext();case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),validationSchema:k.object().shape({}),render:({isSubmitting:e,errors:t,touched:r,values:s,setFieldValue:l,handleChange:d})=>n.a.createElement(w.e,null,s.ledgerConnected?n.a.createElement(wt,{title:kt(c)[a],type:a,generatedAddressList:this.state.generatedAddressList,userAddressList:i,getNextFive:this.getNextFive,newAddress:o,values:s,errors:t,touched:r,setFieldValue:l,handleChange:d}):n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),ae()(s.ledgerStatus)?n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,null,n.a.createElement("b",null,"Connecting to Ledger Nano X/S")),n.a.createElement(ft.a,{thickness:7})):n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,null,s.ledgerStatus),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(u.a,null,"Are you using a Ledger Nano X/S device?")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Is the Factom app launched on your device?")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Is your device running the latest version?")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Have you closed the Ledger Live Manager?")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Are you using\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.com/chrome/"},"Chrome"),"?")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Are you running any adblockers?")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Have you tried restarting your device?")),n.a.createElement("li",null,n.a.createElement(u.a,null,"Support is available in the #ledger-nano-s channel on our\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://discord.gg/79kH2pp"},"Discord server"),"."))),n.a.createElement(p.a,{variant:"contained",color:"primary",onClick:this.retryConnection},"Retry")),n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(u.a,null,n.a.createElement("b",null,"Note:")),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(u.a,null,"The Ledger Nano X/S hardware wallet can be ordered from\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.ledger.com/?r=1b0be6fa98ba"},"Ledger's website")," ","(affiliate link).")),n.a.createElement("li",null,n.a.createElement(u.a,null,"To function properly, the Factom application needs to be launched on the Ledger Nano X/S. You can install the application from the Ledger Live Manager."))))),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(p.a,{onClick:this.props.handleBack},"Back"),n.a.createElement(p.a,{type:"submit",disabled:e||!this.state.ledgerConnected,variant:"contained",color:"primary"},this.hasAddressSelected(s)?"Add and Continue":"Skip")))})}}var Ct=c()(P.b,ct.b,O.b,Object(i.a)(e=>({errorText:{color:"red",fontSize:"12px"}})))(At);const Ft=e=>({fct:e.factoidAbbreviationFull+" Addresses",ec:e.ecAbbreviationFull+" Addresses"});var St=c()(P.b,fe,O.b,Object(i.a)(e=>({errorText:{color:"red",fontSize:"12px"}})))((function(e){const t=e.mnemonic,a=e.type,s=e.handleNext,l=e.networkController.networkProps,o=e.seedController.getSeedAddresses,c=e.walletController,i=c.getAddresses,d=c.addAddresses,m=c.newSeedAddress,u=Object(r.useState)([]),h=Object(L.a)(u,2),E=h[0],b=h[1],f=Object(r.useState)(5),g=Object(L.a)(f,2),v=g[0],y=g[1];function x(){y(e=>y(e+5))}Object(r.useEffect)(()=>{function e(){return(e=Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return n.apply(this,arguments)}function n(){return(n=Object(X.a)(Y.a.mark((function e(){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t,v-5,5,a);case 2:r=e.sent,b(e=>[...e,...r]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[v,t,a,o]);let k=i(a);return n.a.createElement(w.f,{enableReinitialize:!0,initialValues:{addresses:[]},onSubmit:function(){var e=Object(X.a)(Y.a.mark((function e(t,r){var n,l,o,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],l=Object(_.a)(Ge()(t,"addresses"));try{for(l.s();!(o=l.n()).done;)c=o.value,ae()(c)||n.push(c)}catch(r){l.e(r)}finally{l.f()}d(n,a),s();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),render:({isSubmitting:t,errors:r,touched:s,values:o,setFieldValue:c,handleChange:i})=>{return n.a.createElement(w.e,null,n.a.createElement(wt,{title:Ft(l)[a],type:a,generatedAddressList:E,userAddressList:k,getNextFive:x,newAddress:m,values:o,errors:r,touched:s,setFieldValue:c,handleChange:i}),n.a.createElement("br",null),n.a.createElement("br",null),e.handleBack&&n.a.createElement(p.a,{onClick:e.handleBack},"Back"),n.a.createElement(p.a,{type:"submit",disabled:t,variant:"contained",color:"primary"},(d=o,Object.keys(d).filter(e=>e.startsWith("checkbox")).some(e=>d[e])?"Add and Continue":"Skip")));var d}})}));class Tt extends n.a.Component{render(){return n.a.createElement(w.f,{initialValues:{mnemonic:""},onSubmit:(e,t)=>{this.props.setMnemonic(Ge()(e,"mnemonic").trim()),this.props.handleNext()},validationSchema:k.object().shape({mnemonic:k.string().trim().required("Required").test("mnemonic","Invalid Seed Phrase",ve.a.validMnemonic)}),render:({isSubmitting:e,errors:t,touched:a})=>n.a.createElement(w.e,{style:{width:"500px"},autoComplete:"nope",autoComplete:"off"},n.a.createElement(n.a.Fragment,null,n.a.createElement(S,{error:!(!Ge()(t,"mnemonic")||!Ge()(a,"mnemonic")),name:"mnemonic",label:"Seed Phrase",placeholder:"Enter Seed Phrase",autoFocus:!0,margin:"dense",fullWidth:!0})),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(p.a,{onClick:()=>{this.props.setMnemonic(null),this.props.handleBack()}},"Back"),n.a.createElement(p.a,{type:"submit",disabled:e,variant:"contained",color:"primary"},"Next")))})}}var Nt=c()(O.b,Object(i.a)(e=>({})))(Tt);var Ot=function(e){const t=Object(r.useState)(null),a=Object(L.a)(t,2),s=a[0],l=a[1],o=e.activeStep,c=e.updateImportType,i=e.handleNext,d=e.handleBack,m=e.importType;switch(o){case 0:return n.a.createElement(tt,{handleNext:i,importType:m,updateImportType:c});case 1:if("fct"===m)return n.a.createElement(nt,{handleNext:i,handleBack:d});if("ec"===m)return n.a.createElement(st,{handleNext:i,handleBack:d});if("new"===m)return n.a.createElement(ot,{setMnemonic:l,mnemonic:s,handleNext:i,handleBack:d});if("importSeed"===m)return n.a.createElement(Nt,{setMnemonic:l,handleNext:i,handleBack:d});if("ledger"===m)return n.a.createElement(Ct,{handleNext:i,handleBack:d,type:"fct",key:"fctLedgerForm"});break;case 2:if("new"===m||"importSeed"===m)return n.a.createElement(St,{mnemonic:s,handleNext:i,type:"fct",key:"fctSeedForm"});break;case 3:if("new"===m||"importSeed"===m)return n.a.createElement(St,{mnemonic:s,handleNext:i,handleBack:d,type:"ec",key:"ecSeedForm"});break;default:return"Unknown step"}},Pt=a(80),jt=a.n(Pt);const It=()=>["Import Method","Address details"],Lt=e=>["Import Method","Seed Value",e.factoidAbbreviationFull,e.ecAbbreviationFull],Rt={importSeed:Lt,new:Lt,ledger:e=>["Import Method",e.factoidAbbreviationFull],fct:It,ec:It};const Wt=({classes:e,isWalletEmpty:t,network:a})=>t?n.a.createElement(u.a,{variant:"subtitle1",gutterBottom:!0},"No Addresses have been added."):"mainnet"===a?n.a.createElement(u.a,{variant:"subtitle1",gutterBottom:!0},"You have finished adding an address."):"testnet"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{variant:"subtitle1",gutterBottom:!0},"You have finished adding a Testnet address."),n.a.createElement(R.a,{className:e.testnetWarning,elevation:2},n.a.createElement(u.a,{className:e.warningText},n.a.createElement(Be.a,{className:e.warningIcon}),"\xa0\xa0Use these addresses for Testnet ONLY. Do not send real Factoids to these addresses, or you run the risk of losing them. Please read all notices.",n.a.createElement("br",null),n.a.createElement("br",null),"You can use the"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://faucet.factoid.org/"},"Factom Testnet Faucet"," ",n.a.createElement(jt.a,{color:"primary",style:{fontSize:15}}))," ","to receive Testoids."))):void 0;var Bt=c()(P.b,O.b,Object(i.a)(e=>({stepper:{backgroundColor:"#eeeeee"},paper:{minWidth:565,padding:e.spacing(4),minHeight:300},testnetWarning:{borderColor:"#ffa000",borderStyle:"solid",padding:5,width:415},warningIcon:{color:"#ffa000",display:"inline",position:"relative",top:"6px"},warningText:{display:"inline"}})))((function(e){const t=Object(r.useState)(0),a=Object(L.a)(t,2),s=a[0],l=a[1],o=Object(r.useState)("fct"),c=Object(L.a)(o,2),i=c[0],d=c[1],m=Object(r.useState)(()=>It),u=Object(L.a)(m,2),h=u[0],E=u[1];function b(){l(0),d("fct"),E(()=>It)}const f=e.classes,g=e.handleClose,v=e.handleCloseText,y=e.networkController.networkProps,x=e.walletController.isWalletEmpty,w=h(y),k="testnet"===y.network?"Add Testnet Address":"Add Address";return n.a.createElement(R.a,{className:f.paper,elevation:2},n.a.createElement(A,{text:k,id:"modal-title"}),n.a.createElement(_e.a,{activeStep:s,className:f.stepper},w.map(e=>{const t={};return n.a.createElement(Ue.a,Object.assign({key:e},{}),n.a.createElement(Ye.a,t,e))})),s===w.length?n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(Wt,{classes:f,isWalletEmpty:x(),network:y.network}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,x()?n.a.createElement(p.a,{variant:"outlined",onClick:b},"Reset"):n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{onClick:b},"Add Another"),n.a.createElement(p.a,{onClick:g,variant:"contained",color:"primary"},v)))):n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(Ot,{activeStep:s,updateImportType:function(e){d(e),E(()=>Rt[e])},handleNext:function(){l(s+1)},handleBack:function(){l(s-1)},importType:i})))}));var Mt=Object(i.a)(e=>({modalContent:{position:"absolute",boxShadow:e.shadows[5],top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:"490px"},button:{width:"275px;",height:"50px",marginBottom:"15px"},center:{margin:"0 auto"}}))((function(e){const t=e.classes,a=Object(r.useState)(!1),s=Object(L.a)(a,2),l=s[0],o=s[1];return n.a.createElement("div",{className:t.center},n.a.createElement(p.a,{onClick:()=>o(!0),className:t.button,variant:"outlined",color:"primary"},"Add Address"),n.a.createElement(N.a,{"aria-labelledby":"modal-title",open:l,onClose:()=>o(!1)},n.a.createElement("div",{className:t.modalContent},n.a.createElement(Bt,{handleClose:()=>o(!1),handleCloseText:"Exit"}))))})),Dt=a(683),Ht=a(675),Vt=a(676),Kt=a(169),qt=a.n(Kt),zt=a(323),_t=a(324);const Ut=Object(i.a)({ledgerLogo:{height:15,opacity:"62%"},sidebarIcon:{height:16,opacity:"62%"}})(e=>{const t=e.classes,a=e.importType;return n.a.createElement(Vt.a,{item:!0,xs:1,className:t.iconContainer},"seed"===a&&n.a.createElement(zt.a,{className:t.sidebarIcon}),"ledger"===a&&n.a.createElement("img",{className:t.ledgerLogo,src:qt.a,alt:"ledger icon"}),"standard"===a&&n.a.createElement(_t.a,{className:t.sidebarIcon}))});var Yt=c()(P.b,O.b,Object(i.a)(e=>({noPadding:{padding:"0px"},break:{wordWrap:"break-word"},expanded:{backgroundColor:"aliceblue"},iconContainer:{paddingTop:"2px"},listAddrRoot:{width:"100%",position:"relative",overflow:"auto",maxHeight:270},addressSummary:{padding:"0 0 0 24px"},addressHeading:{fontWeight:500},flex:{display:"flex"},walletList:{padding:"6px"},walletListHeader:{paddingTop:"5px",paddingBottom:"5px"},addressList:{paddingBottom:"0px",backgroundColor:"#ddd",borderRadius:"4px"}})))((function(e){const t=e.classes,a=e.walletController,r=a.getEntryCreditAddresses,s=a.getFactoidAddresses,l=a.activeAddressIndex_o,o=a.selectAddress,c=e.networkController.networkProps,i=r(),d=s(),m={paddingRight:"0px"},p=d.map((function(e,a){const r=l.index===a&&"fct"===l.type,s=r?{fontWeight:500}:{};return n.a.createElement(Dt.a,{key:a,expanded:r,onClick:Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a,"fct");case 2:case"end":return e.stop()}}),e)}))),className:r?t.expanded:"","data-cy":"sidebarFctIndex_".concat(a)},n.a.createElement(Ht.a,{className:t.addressSummary},n.a.createElement(Vt.a,{container:!0,justify:"space-between",style:m},n.a.createElement(Vt.a,{item:!0,xs:6},n.a.createElement(u.a,{className:t.break,style:s,"data-cy":"sidebarFctNickname"},e.nickname)),!ae()(e.balance)&&n.a.createElement(Vt.a,{item:!0,xs:5},n.a.createElement(u.a,{className:t.break,"data-cy":"sidebarFctBalance"},n.a.createElement(yt,{balance:e.balance,type:"fct"}))),n.a.createElement(Ut,{importType:e.importType}))))})),h=i.map((function(e,a){const r=l.index===a&&"ec"===l.type,s=r?{fontWeight:500}:{};return n.a.createElement(Dt.a,{key:a,expanded:r,onClick:Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a,"ec");case 2:case"end":return e.stop()}}),e)}))),className:r?t.expanded:"","data-cy":"sidebarEcIndex_".concat(a)},n.a.createElement(Ht.a,{className:t.addressSummary},n.a.createElement(Vt.a,{container:!0,justify:"space-between",style:m},n.a.createElement(Vt.a,{item:!0,xs:6},n.a.createElement(u.a,{className:t.break,style:s,"data-cy":"sidebarEcNickname"},e.nickname)),!ae()(e.balance)&&n.a.createElement(Vt.a,{item:!0,xs:5},n.a.createElement(u.a,{className:t.break,"data-cy":"sidebarEcBalance"},n.a.createElement(yt,{balance:e.balance,type:"ec"}))),n.a.createElement(Ut,{importType:e.importType}))))}));return n.a.createElement(n.a.Fragment,null,!Q()(d)&&n.a.createElement(R.a,{className:t.noPadding,elevation:2},n.a.createElement(qe.a,{className:t.addressList},n.a.createElement(ze.a,{className:t.walletListHeader},n.a.createElement(u.a,{className:t.addressHeading,variant:"subtitle1"},c.factoidAbbreviationFull+" Addresses")),n.a.createElement(ze.a,{disableGutters:!0,className:t.walletList},n.a.createElement("div",{"data-cy":"fctAddressList",className:t.listAddrRoot},p)))),!Q()(i)&&n.a.createElement(n.a.Fragment,null,!Q()(d)&&n.a.createElement("br",null),n.a.createElement(R.a,{className:t.noPadding,elevation:2},n.a.createElement(qe.a,{className:t.addressList},n.a.createElement(ze.a,{className:t.walletListHeader},n.a.createElement(u.a,{className:t.addressHeading,variant:"subtitle1"},c.ecAbbreviationFull+" Addresses")),n.a.createElement(ze.a,{disableGutters:!0,className:t.walletList},n.a.createElement("div",{"data-cy":"ecAddressList",className:t.listAddrRoot},h))))),n.a.createElement("br",null),n.a.createElement("div",{className:t.flex},n.a.createElement("br",null),n.a.createElement(Mt,null)))})),Xt=a(681),Gt=a(678),Jt=a(98),$t=a.n(Jt);var Qt=c()(Object(i.a)({root:{width:"75%",margin:"0 auto",paddingTop:"26px",paddingBottom:"16px",marginTop:"39px",borderRadius:"10px",backgroundColor:"#eef1f4",textAlign:"center"},transferFactoidAmountText:{fontSize:"50px",color:"#007eff"},transferFactoidUnitText:{width:"55px",height:"24px",fontSize:"20px",color:"#007eff"},factoidAmountSmallText:{color:"#001830",paddingTop:"7px"},detail:{display:"inline-block",paddingLeft:"30px",paddingRight:"30px"},divider:{width:"50%",opacity:.15,border:"solid 1px #103152"}}))(e=>{const t=e.factoidAmount,a=e.classes,r=e.networkProps,s=e.sendFactoshiFee,l=de(s),o=me(t,l),c=t.toLocaleString(void 0,{maximumFractionDigits:8}),i="".concat(o.toLocaleString(void 0,{maximumFractionDigits:8})," ").concat(r.factoidAbbreviation),d="".concat(l.toLocaleString(void 0,{maximumFractionDigits:8})," ").concat(r.factoidAbbreviation);return n.a.createElement(R.a,{className:a.root,elevation:2},n.a.createElement("div",null,"Transaction Preview"),n.a.createElement("span",{"data-cy":"previewAmount",className:a.transferFactoidAmountText},c),n.a.createElement("span",{className:a.transferFactoidUnitText}," "+r.factoidAbbreviation),n.a.createElement("hr",{className:a.divider}),n.a.createElement("div",{className:a.detail},n.a.createElement("div",null,"Total Amount:"),n.a.createElement("div",{"data-cy":"previewTotalAmount",className:a.factoidAmountSmallText},i)),n.a.createElement("div",{className:a.detail},n.a.createElement("div",null,"Network Fee:"),n.a.createElement("div",{"data-cy":"networkFee",className:a.factoidAmountSmallText},d)))}),Zt=a(162),ea=a(325);const ta=({alt:e,className:t,onClick:a,src:r})=>n.a.createElement("img",{alt:e,className:t,onClick:a,src:r});var aa=c()(O.b,ct.b,Object(i.a)(()=>({ledgerLogo:{height:15,opacity:"62%"},sidebarIcon:{height:16,opacity:"62%"},paper:{textAlign:"left",backgroundColor:"aliceblue",padding:"16px",marginBottom:"3px",boxShadow:"inset 0px 0px 5px 0px rgba(0,0,0,0.2), inset 0px 0px 2px 0px rgba(0,0,0,0.14), inset 0px 0px 1px -2px rgba(0,0,0,0.12)"},pointer:{cursor:"pointer"},logo:{height:15},logoBackground:{background:"#3f51b545",padding:"10px",borderRadius:"50%",paddingBottom:"5px"},bold:{fontWeight:500}})))(e=>{const t=e.classes,a=e.walletController,r=a.getActiveAddress,s=a.activeAddressIndex_o,l=e.ledgerController.checkAddress,o=r();return n.a.createElement(R.a,{className:t.paper},n.a.createElement(Vt.a,{container:!0,justify:"space-between"},n.a.createElement(Vt.a,{item:!0},n.a.createElement(u.a,{"data-cy":"addressNickname",className:t.bold,gutterBottom:!0},o.nickname),!ae()(o.balance)&&n.a.createElement(u.a,{"data-cy":"balance",variant:"h4"},n.a.createElement(yt,{balance:o.balance,type:s.type})),n.a.createElement(u.a,{"data-cy":"address"},o.address,n.a.createElement(ea.CopyToClipboard,{text:o.address},n.a.createElement(Et.a,{title:"Copy",className:t.pointer},n.a.createElement(Zt.a,{fontSize:"inherit",color:"primary"},n.a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})))))),n.a.createElement(Vt.a,{item:!0},"ledger"===o.importType&&n.a.createElement(Et.a,{title:"Verify Ledger Nano X/S Address",className:t.pointer},n.a.createElement("div",{className:t.logoBackground},n.a.createElement(ta,{className:t.logo,src:qt.a,alt:"Ledger Logo",onClick:Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(o,s.type);case 2:case"end":return e.stop()}}),e)})))}))))))});const ra=({href:e})=>n.a.createElement(u.a,null,"The transaction status is available in the"," ",n.a.createElement(Et.a,{title:"Open Factom Explorer"},n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e},"Factom Explorer.",n.a.createElement(jt.a,{color:"primary",style:{fontSize:15}})))," ","Funds are available for use immediately.",n.a.createElement("br",null)),na=({href:e})=>n.a.createElement(u.a,null,"This transaction will be visible"," ",n.a.createElement(Et.a,{title:"Open Factom Explorer"},n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e},"here ",n.a.createElement(jt.a,{color:"primary",style:{fontSize:15}})))," ","in 10-15 minutes, after being included in the next Factom block currently being processed by the blockchain. Funds are available for use immediately.",n.a.createElement("br",null));var sa=({transactionID:e})=>{const t=Object(r.useContext)(P.a).networkProps,a=t.explorerURL+t.transactionUrlSuffix+e;return"mainnet"===t.network?n.a.createElement(ra,{href:a}):"testnet"===t.network?n.a.createElement(na,{href:a}):void 0};class la extends r.Component{constructor(...e){super(...e),this.state={sendFactoshiFee:null},this.insufficientFundsMessage=()=>"Insufficient Funds (Transaction Fee is ".concat(de(this.state.sendFactoshiFee)," ").concat(this.props.networkController.networkProps.factoidAbbreviation,")"),this.getMaxFactoshis=(e,t)=>{const a=ue(e,t);return a<0?0:a},this.verifyKey=e=>{const t=this.props.walletController.getActiveAddress();return this.props.walletController.verifyKey(e,t)},this.verifySeed=e=>{const t=this.props.walletController.getActiveAddress();return this.props.seedController.verifySeed(e,t)}}componentDidMount(){var e=this;return Object(X.a)(Y.a.mark((function t(){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.walletController.getFactoshiFee();case 2:a=t.sent,e.setState({sendFactoshiFee:a});case 4:case"end":return t.stop()}}),t)})))()}render(){const e=this.props,t=e.classes,a=e.factomCliController.factomCli,r=e.walletController,s=r.getFactoidAddresses,l=r.getActiveAddress,o=r.updateBalances,c=r.activeAddressIndex_o,i=r.addAddressTransaction,d=e.ledgerController.signTransaction,m=e.networkController.networkProps,h=e.seedController.signWithSeed,E=s(),b=l();let f;if(null!=this.state.sendFactoshiFee&&null!=b.balance){const e=this.getMaxFactoshis(b.balance,this.state.sendFactoshiFee);f=de(e)}return n.a.createElement(w.f,{enableReinitialize:!0,initialValues:{sendFactoidAmount:"",recipientAddress:"",myFctWalletAnchorEl:null,privateKey:"",seed:"",walletImportType:b.importType,transactionID:null,ledgerStatus:null,transactionError:null,addressToReinitialize:b.address},onSubmit:function(){var e=Object(X.a)(Y.a.mark((function e(t,r){var n,s,l,m,u,p,E,f,g,v,y,x,w,k;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sendFactoidAmount,s=t.recipientAddress,l=t.privateKey,m=t.seed,u={},p=Ge()(t,"walletImportType"),E=ie(n),f=s,e.prev=5,"standard"!==p){e.next=12;break}return e.next=9,a.createFactoidTransaction(l,f,E);case 9:u=e.sent,e.next=30;break;case 12:if("seed"!==p){e.next=22;break}return g=m.trim(),v=b.index,"sendFCT",y={mnemonic:g,index:v,toAddr:f,amount:E,type:"sendFCT"},e.next=19,h(y);case 19:u=e.sent,e.next=30;break;case 22:if("ledger"!==p){e.next=30;break}return r.setFieldValue("ledgerStatus","Please open the Factom app on your Ledger device and confirm the transaction."),x=b.address,v=b.index,w={fromAddr:x,toAddr:f,amount:E,index:v},e.next=29,d(w);case 29:u=e.sent;case 30:return e.next=32,a.sendTransaction(u);case 32:return k=e.sent,e.next=35,i(c,k);case 35:r.setFieldValue("transactionID",k),o(),e.next=44;break;case 39:e.prev=39,e.t0=e.catch(5),console.log(e.t0),r.resetForm(),"ledger"===p?r.setFieldValue("transactionError","An error occured. Please open the Factom app on your Ledger device and try again."):r.setFieldValue("transactionError","An error occured. Please try again.");case 44:case"end":return e.stop()}}),e,null,[[5,39]])})));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:k.object().shape({recipientAddress:k.string().required("Required").test("recipientAddress","Invalid Address",se.isValidPublicFctAddress),sendFactoidAmount:k.number().required("Required").typeError("Must be a number").positive("Must be greater than 0").test("sendFactoidAmount","Limit 8 decimal places",e=>(e+"").match(ce)).max(f,this.insufficientFundsMessage),walletImportType:k.string(),privateKey:k.string().when("walletImportType",{is:"standard",then:k.string().required("Required").test("privateKey","Invalid Key",this.verifyKey),otherwise:k.string().notRequired()}),seed:k.string().when("walletImportType",{is:"seed",then:k.string().trim().required("Required").test("seed","Invalid Seed Phrase",this.verifySeed),otherwise:k.string().notRequired()})}),render:({isSubmitting:e,errors:a,touched:r,values:s,setFieldValue:l,handleReset:o,handleChange:c,isValid:i})=>n.a.createElement(w.e,{autoComplete:"nope",autoComplete:"off"},n.a.createElement(aa,null),n.a.createElement(w.c,{name:"recipientAddress"},({field:t,form:s})=>n.a.createElement(F.a,Object.assign({error:!(!a.recipientAddress||!r.recipientAddress)},t,{onChange:e=>{c(e),l("transactionError",null)},label:"Recipient "+m.factoidAbbreviation+" address",fullWidth:!0,type:"text",placeholder:"Enter "+m.factoidAbbreviationFull+" Address",disabled:e,inputProps:{spellCheck:!1,maxLength:52,autoComplete:"nope",autoComplete:"off"}}))),n.a.createElement(Vt.a,{container:!0,justify:"space-between"},n.a.createElement(Vt.a,{item:!0},n.a.createElement(w.a,{name:"recipientAddress",render:e=>n.a.createElement("div",{className:t.errorText},e)})),n.a.createElement(Vt.a,{item:!0},n.a.createElement(oa,{values:s,setFieldValue:l,factoidAddresses:E}),n.a.createElement(u.a,{variant:"caption","aria-owns":s.myFctWalletAnchorEl?"simple-menu":null,"aria-haspopup":"true",onClick:t=>{e||(l("transactionError",null),l("myFctWalletAnchorEl",t.currentTarget))},className:t.pointer},"Send to one of my addresses"))),n.a.createElement(w.c,{name:"sendFactoidAmount"},({field:t,form:s})=>n.a.createElement(F.a,Object.assign({type:"number",error:!(!a.sendFactoidAmount||!r.sendFactoidAmount)},t,{placeholder:"Enter Amount ("+m.factoidAbbreviation+")",label:"Amount",fullWidth:!0,disabled:e}))),n.a.createElement(Vt.a,{container:!0,justify:"space-between"},n.a.createElement(Vt.a,{item:!0},n.a.createElement(w.a,{name:"sendFactoidAmount",render:e=>n.a.createElement("div",{className:t.errorText},e)})),n.a.createElement(Vt.a,{item:!0},n.a.createElement(u.a,{variant:"caption",onClick:()=>{e||l("sendFactoidAmount",f)},className:t.pointer},"Use Max"))),"standard"===Ge()(s,"walletImportType")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(w.c,{name:"privateKey"},({field:t,form:s})=>n.a.createElement(F.a,Object.assign({error:!(!a.privateKey||!r.privateKey)},t,{placeholder:"Enter Private Key for "+b.nickname,label:"Private Key",fullWidth:!0,disabled:e,inputProps:{spellCheck:!1,maxLength:52,autoComplete:"nope",autoComplete:"off"}}))),n.a.createElement(w.a,{name:"privateKey",render:e=>n.a.createElement("div",{className:t.errorText},e)})),"seed"===Ge()(s,"walletImportType")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(w.c,{name:"seed"},({field:t,form:s})=>n.a.createElement(F.a,Object.assign({inputProps:{autoComplete:"nope",autoComplete:"off"},error:!(!Ge()(a,"seed")||!Ge()(r,"seed"))},t,{placeholder:"Enter Seed Phrase for "+b.nickname,label:"Seed Phrase",fullWidth:!0,disabled:e}))),n.a.createElement(w.a,{name:"seed",render:e=>n.a.createElement("div",{className:t.errorText},e)})),s.sendFactoidAmount&&i?n.a.createElement(Qt,{networkProps:m,factoidAmount:s.sendFactoidAmount,sendFactoshiFee:this.state.sendFactoshiFee}):"",n.a.createElement("br",null),!ae()(s.transactionError)&&n.a.createElement(u.a,{className:t.transactionErrorText},s.transactionError),n.a.createElement("br",null),e?n.a.createElement(n.a.Fragment,null,null!==s.transactionID?n.a.createElement("div",null,n.a.createElement(R.a,{className:t.transaction,elevation:2},n.a.createElement($t.a,{nativeColor:"#6fbf73",className:t.successIcon}),"\xa0",n.a.createElement(u.a,{gutterBottom:!0,style:{display:"inline"}},n.a.createElement("b",null,"Transaction ID:")," ",s.transactionID),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(sa,{transactionID:s.transactionID}),n.a.createElement("br",null)),n.a.createElement("br",null),n.a.createElement(p.a,{type:"button",className:"outline",color:"primary",variant:"contained",onClick:o},"New Transaction")):n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,{thickness:7}),s.ledgerStatus)):n.a.createElement(p.a,{className:t.sendButton,variant:"contained",color:"primary",type:"submit",disabled:e},"Send "+m.factoidAbbreviationFull+"s"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(u.a,null,"Please verify all details are correct before hitting send.",n.a.createElement("br",null),"Nobody can reverse mistaken transactions."))})}}function oa(e){const t=e.values,a=e.setFieldValue,r=e.factoidAddresses.map((e,t)=>n.a.createElement(v.a,{key:t,onClick:()=>{a("myFctWalletAnchorEl",null),a("recipientAddress",e.address)}},e.nickname));return n.a.createElement(g.a,{id:"simple-menu",anchorEl:t.myFctWalletAnchorEl,open:Boolean(t.myFctWalletAnchorEl),onClose:()=>{a("myFctWalletAnchorEl",null)}},r)}var ca=c()(P.b,ct.b,fe,O.b,I,Object(i.a)({sendButton:{width:"50%"},errorText:{color:"red",fontSize:"12px",textAlign:"left"},transactionErrorText:{color:"red",fontSize:"16px"},pointer:{cursor:"pointer"},transaction:{borderColor:"#6fbf73",borderStyle:"solid",paddingTop:3,paddingBottom:8},successIcon:{position:"relative",top:"5px"}}))(la);var ia=c()(Object(i.a)({root:{width:"75%",margin:"0 auto",paddingTop:"26px",paddingBottom:"16px",marginTop:"39px",borderRadius:"10px",backgroundColor:"#eef1f4",textAlign:"center"},convertECAmountText:{fontSize:"50px",color:"#007eff"},ecUnitText:{width:"55px",height:"24px",fontSize:"20px",color:"#007eff"},factoidCostSmallText:{color:"#001830",paddingTop:"7px"},detail:{display:"inline-block",paddingLeft:"65px",paddingRight:"65px"},divider:{width:"50%",opacity:.15,border:"solid 1px #103152"}}))(e=>{const t=e.ecAmount,a=e.factoidAmount,r=e.classes,s=e.networkProps,l=e.sendFactoidFee,o=me(a,l),c=t.toLocaleString(void 0,{maximumFractionDigits:8}),i=o.toLocaleString(void 0,{maximumFractionDigits:8})+" "+s.factoidAbbreviation,d=l.toLocaleString(void 0,{maximumFractionDigits:8})+" "+s.factoidAbbreviation;return n.a.createElement(R.a,{className:r.root,elevation:2},n.a.createElement("div",null,"Transaction Preview"),n.a.createElement("span",{"data-cy":"ecPreviewAmount",className:r.convertECAmountText},c),n.a.createElement("span",{className:r.ecUnitText}," "+s.ecAbbreviation),n.a.createElement("hr",{className:r.divider}),n.a.createElement("div",{className:r.detail},n.a.createElement("div",null,"Total Cost:"),n.a.createElement("div",{"data-cy":"ecPreviewTotalAmount",className:r.factoidCostSmallText},i)),n.a.createElement("div",{className:r.detail},n.a.createElement("div",null,"Network Fee:"),n.a.createElement("div",{"data-cy":"networkFee",className:r.factoidCostSmallText},d)))});class da extends r.Component{constructor(...e){super(...e),this.state={sendFactoshiFee:null,ecRate:null},this.verifyKey=e=>{const t=this.props.walletController.getActiveAddress();return this.props.walletController.verifyKey(e,t)},this.verifySeed=e=>{const t=this.props.walletController.getActiveAddress();return this.props.seedController.verifySeed(e,t)}}componentDidMount(){var e=this;return Object(X.a)(Y.a.mark((function t(){var a,r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.walletController.getFactoshiFee();case 2:return a=t.sent,t.next=5,e.props.walletController.getEntryCreditRate();case 5:r=t.sent,e.setState({sendFactoshiFee:a,ecRate:r});case 7:case"end":return t.stop()}}),t)})))()}getMaxEC(e,t){let a=((e,t)=>{const a=new oe.a(e).div(t);return parseFloat(a)})(ue(e,t),this.state.ecRate);return a<0?0:a}render(){var e=this;const t=this.props,a=t.classes,r=t.walletController,s=r.updateBalances,l=r.getEntryCreditAddresses,o=r.getActiveAddress,c=r.activeAddressIndex_o,i=r.addAddressTransaction,d=t.ledgerController.signTransaction,m=t.factomCliController.factomCli,h=t.networkController.networkProps,E=t.seedController.signWithSeed,b=o(),f=l();let g;return null!=this.state.sendFactoshiFee&&null!=b.balance&&null!=this.state.ecRate&&(g=this.getMaxEC(b.balance,this.state.sendFactoshiFee)),n.a.createElement(w.f,{enableReinitialize:!0,initialValues:{entryCreditAmount:"",recipientAddress:"",myFctWalletAnchorEl:null,privateKey:"",seed:"",walletImportType:b.importType,transactionID:null,ledgerStatus:null,transactionError:null,addressToReinitialize:b.address},onSubmit:function(){var t=Object(X.a)(Y.a.mark((function t(a,r){var n,l,o,u,p,h,f,g,v,y,x,w,k,A;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.entryCreditAmount,l=a.recipientAddress,o=a.privateKey,u=a.seed,p={},h=Ge()(a,"walletImportType"),t.prev=3,"standard"!==h){t.next=10;break}return t.next=7,m.createEntryCreditPurchaseTransaction(o,l,n);case 7:p=t.sent,t.next=32;break;case 10:if("seed"!==h){t.next=22;break}return f=u.trim(),g=b.index,"convertFCT",x={mnemonic:f,index:g,toAddr:v=l,amount:y=n,type:"convertFCT"},t.next=19,E(x);case 19:p=t.sent,t.next=32;break;case 22:if("ledger"!==h){t.next=32;break}return r.setFieldValue("ledgerStatus","Please open the Factom app on your Ledger device and confirm the transaction."),w=b.address,v=l,y=Math.round(e.state.ecRate*n),g=b.index,k={fromAddr:w,toAddr:v,amount:y,index:g},t.next=31,d(k);case 31:p=t.sent;case 32:return t.next=34,m.sendTransaction(p);case 34:return A=t.sent,t.next=37,i(c,A);case 37:r.setFieldValue("transactionID",A),s(),t.next=46;break;case 41:t.prev=41,t.t0=t.catch(3),console.log(t.t0),r.resetForm(),"ledger"===h?r.setFieldValue("transactionError","An error occured. Please open the Factom app on your Ledger device and try again."):r.setFieldValue("transactionError","An error occured. Please try again.");case 46:case"end":return t.stop()}}),t,null,[[3,41]])})));return function(e,a){return t.apply(this,arguments)}}(),validationSchema:k.object().shape({recipientAddress:k.string().required("Required").test("recipientAddress","Invalid Address",se.isValidPublicEcAddress),entryCreditAmount:k.number().required("Required").typeError("Must be a number").positive("Must be greater than 0").integer("Must be a whole number").max(g,"Insufficient Funds"),walletImportType:k.string(),privateKey:k.string().when("walletImportType",{is:"standard",then:k.string().required("Required").test("privateKey","Invalid Key",this.verifyKey),otherwise:k.string().notRequired()}),seed:k.string().when("walletImportType",{is:"seed",then:k.string().trim().required("Required").test("seed","Invalid Seed Phrase",this.verifySeed),otherwise:k.string().notRequired()})}),render:({isSubmitting:e,errors:t,touched:r,values:s,setFieldValue:l,handleReset:o,handleChange:c,isValid:i})=>n.a.createElement(w.e,{autoComplete:"nope",autoComplete:"off"},n.a.createElement(aa,null),n.a.createElement(w.c,{name:"recipientAddress"},({field:a,form:s})=>n.a.createElement(F.a,Object.assign({error:!(!t.recipientAddress||!r.recipientAddress)},a,{onChange:e=>{c(e),l("transactionError",null)},label:"Recipient "+h.ecAbbreviation+" address",fullWidth:!0,type:"text",placeholder:"Enter "+h.ecAbbreviationFull+" address",disabled:e,inputProps:{spellCheck:!1,maxLength:52,autoComplete:"nope",autoComplete:"off"}}))),n.a.createElement(Vt.a,{container:!0,justify:"space-between"},n.a.createElement(Vt.a,{item:!0},n.a.createElement(w.a,{name:"recipientAddress",render:e=>n.a.createElement("div",{className:a.errorText},e)})),!Q()(f)&&n.a.createElement(Vt.a,{item:!0},n.a.createElement(ma,{values:s,setFieldValue:l,ecAddresses:f}),n.a.createElement(u.a,{variant:"caption","aria-owns":s.myFctWalletAnchorEl?"simple-menu":null,"aria-haspopup":"true",onClick:t=>{e||(l("transactionError",null),l("myFctWalletAnchorEl",t.currentTarget))},className:a.pointer},"Send to one of my addresses"))),n.a.createElement(w.c,{name:"entryCreditAmount"},({field:a,form:s})=>n.a.createElement(F.a,Object.assign({type:"number",error:!(!t.entryCreditAmount||!r.entryCreditAmount)},a,{placeholder:"Enter Amount ("+h.ecAbbreviation+")",label:"Amount",fullWidth:!0,disabled:e}))),n.a.createElement(Vt.a,{container:!0,justify:"space-between"},n.a.createElement(Vt.a,{item:!0},n.a.createElement(w.a,{name:"entryCreditAmount",render:e=>n.a.createElement("div",{className:a.errorText},e)})),n.a.createElement(Vt.a,{item:!0},n.a.createElement("br",null))),"standard"===Ge()(s,"walletImportType")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(w.c,{name:"privateKey"},({field:a,form:s})=>n.a.createElement(F.a,Object.assign({error:!(!t.privateKey||!r.privateKey)},a,{placeholder:"Enter Private Key for "+b.nickname,label:"Private Key",fullWidth:!0,disabled:e,inputProps:{spellCheck:!1,maxLength:52,autoComplete:"nope",autoComplete:"off"}}))),n.a.createElement(w.a,{name:"privateKey",render:e=>n.a.createElement("div",{className:a.errorText},e)})),"seed"===Ge()(s,"walletImportType")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(w.c,{name:"seed"},({field:a,form:s})=>n.a.createElement(F.a,Object.assign({error:!(!Ge()(t,"seed")||!Ge()(r,"seed"))},a,{placeholder:"Enter Seed Phrase for "+b.nickname,label:"Seed Phrase",fullWidth:!0,disabled:e,inputProps:{autoComplete:"nope",autoComplete:"off"}}))),n.a.createElement(w.a,{name:"seed",render:e=>n.a.createElement("div",{className:a.errorText},e)})),Ge()(s,"entryCreditAmount")&&i?n.a.createElement(ia,{networkProps:h,ecAmount:Ge()(s,"entryCreditAmount"),factoidAmount:this.state.ecRate*de(Ge()(s,"entryCreditAmount")),sendFactoidFee:de(this.state.sendFactoshiFee)}):"",n.a.createElement("br",null),!ae()(s.transactionError)&&n.a.createElement(u.a,{className:a.transactionErrorText},s.transactionError),n.a.createElement("br",null),e?n.a.createElement(n.a.Fragment,null,null!==s.transactionID?n.a.createElement("div",null,n.a.createElement(R.a,{className:a.transaction,elevation:2},n.a.createElement($t.a,{nativeColor:"#6fbf73",className:a.successIcon}),"\xa0",n.a.createElement(u.a,{style:{display:"inline"}},n.a.createElement("b",null,"Transaction ID:")," ",s.transactionID),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(sa,{transactionID:s.transactionID}),n.a.createElement("br",null)),n.a.createElement("br",null),n.a.createElement(p.a,{type:"button",className:"outline",color:"primary",variant:"contained",onClick:o},"New Transaction")):n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,{thickness:7}),s.ledgerStatus)):n.a.createElement(p.a,{className:a.sendButton,variant:"contained",color:"primary",type:"submit",disabled:e},"Convert "+h.factoidAbbreviation+" to "+h.ecAbbreviation),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(u.a,null,"Please verify all details are correct before hitting send.",n.a.createElement("br",null),"Nobody can reverse mistaken transactions."))})}}function ma(e){const t=e.values,a=e.setFieldValue,r=e.ecAddresses.map((e,t)=>n.a.createElement(v.a,{key:t,onClick:()=>{a("myFctWalletAnchorEl",null),a("recipientAddress",e.address)}},e.nickname));return n.a.createElement(g.a,{id:"simple-menu",anchorEl:t.myFctWalletAnchorEl,open:Boolean(t.myFctWalletAnchorEl),onClose:()=>{a("myFctWalletAnchorEl",null)}},r)}var ua=c()(P.b,ct.b,fe,O.b,I,Object(i.a)({sendButton:{width:"50%"},errorText:{color:"red",fontSize:"12px",textAlign:"left"},pointer:{cursor:"pointer"},transactionErrorText:{color:"red",fontSize:"16px"},transaction:{borderColor:"#6fbf73",borderStyle:"solid",paddingTop:3,paddingBottom:8},successIcon:{position:"relative",top:"5px"}}))(da),pa=a(326),ha=a.n(pa);var Ea=c()(fe,O.b,Object(i.a)({sendButton:{width:"50%"}}))((function(e){const t=e.classes,a=e.walletController.getActiveAddress,r=e.seedController.getPrivateKey,s=a();return n.a.createElement(w.f,{enableReinitialize:!0,initialValues:{privateKey:"",seed:"","showPassword;":!1,addressToReinitialize:s.address},onSubmit:function(){var e=Object(X.a)(Y.a.mark((function e(t,a){var n,l,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.seed;try{l=n.trim(),o=r(l,s),a.setFieldValue("privateKey",o)}catch(c){console.log(c)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:k.object().shape({seed:k.string().trim().required("Required").test("seed","Invalid Seed Phrase",(function(t){const a=e.walletController.getActiveAddress();return e.seedController.verifySeed(t,a)}))}),render:({isSubmitting:e,errors:a,touched:r,values:l,setFieldValue:o})=>n.a.createElement(w.e,{autoComplete:"nope",autoComplete:"off"},n.a.createElement(aa,null),Q()(Ge()(l,"privateKey"))&&n.a.createElement(S,{name:"seed",fullWidth:!0,label:"Seed Phrase",placeholder:"Enter Seed Phrase for "+s.nickname,error:Ge()(a,"seed")&&Ge()(r,"seed"),disabled:e,multiline:!0}),n.a.createElement("br",null),!Q()(Ge()(l,"privateKey"))&&n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(u.a,{"data-cy":"privateKey",variant:"subtitle2",style:{fontSize:15}},"Private Key:\xa0",Ge()(l,"privateKey")&&n.a.createElement(n.a.Fragment,null,Ge()(l,"showPassword;")?Ge()(l,"privateKey"):n.a.createElement(n.a.Fragment,null,"...",n.a.createElement(Et.a,{title:"Display Private Key"},n.a.createElement(h.a,{onClick:()=>{o("showPassword;",!0)}},n.a.createElement(ha.a,{color:"secondary",style:{fontSize:35}}))))))),n.a.createElement("br",null),!e&&n.a.createElement(p.a,{className:t.sendButton,variant:"contained",color:"primary",type:"submit",disabled:e},"Submit"))})})),ba=a(677),fa=a(327),ga=a.n(fa);var va=c()(O.b,Object(i.a)(()=>({deleteButton:{marginLeft:15},deleteConfirmationText:{color:"red"},icon:{position:"relative",top:"5px",left:"6px"},textAlignLeft:{textAlign:"left"},fab:{backgroundColor:"#3f51b545"},pushDown:{paddingTop:"7px"}})))((function(e){const t=e.classes,a=e.walletController,r=a.getActiveAddress,s=a.getFactoidAddresses,l=a.getEntryCreditAddresses,o=a.activeAddressIndex_o,c=a.updateAddress,i=a.deleteAddress,d=r();let m=[];"fct"===o.type?m=s():"ec"===o.type&&(m=l());const p=m.filter(e=>e.address!==d.address).map(e=>e.nickname);return n.a.createElement(w.f,{enableReinitialize:!0,initialValues:{saveLocally:d.saveLocally,nickname:d.nickname,oldNickname:d.nickname,deleteAnchorEl:null,saved:!1},onSubmit:(e,t)=>{t.setFieldValue("saved",!1),window.setTimeout(()=>{c(o,Ge()(e,"nickname").trim(),Ge()(e,"saveLocally")),t.resetForm(),t.setFieldValue("saved",!0)},500)},validationSchema:k.object().shape({nickname:k.string().trim().required("Required").test("nickname","Enter unique nickname",e=>-1===p.indexOf(e))}),render:({isSubmitting:e,errors:a,touched:r,values:s,setFieldValue:l,handleChange:c,submitForm:d,handleBlur:m})=>n.a.createElement(w.e,null,n.a.createElement(Vt.a,{container:!0,item:!0,xs:12,justify:"space-between"},n.a.createElement(Vt.a,{item:!0},n.a.createElement(u.a,{display:"inline",variant:"h6"},"Edit Address"),e&&n.a.createElement(ft.a,{size:20,className:t.icon}),Ge()(s,"saved")&&n.a.createElement(u.a,{display:"inline",style:{color:"green"}},n.a.createElement($t.a,{className:t.icon}))),n.a.createElement(Vt.a,{item:!0,xs:12,className:t.textAlignLeft},n.a.createElement(S,{error:!(!a.nickname||!r.nickname),name:"nickname",disabled:e,onChange:e=>{l("saved",!1),l("oldNickname",Ge()(s,"nickname")),c(e)},onBlur:function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:t.target.value!==Ge()(s,"oldNickname")&&d();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),label:"Nickname",maxLength:25})),n.a.createElement(Vt.a,{container:!0,item:!0,xs:12,className:t.pushDown},n.a.createElement(Vt.a,{item:!0,xs:6,className:t.textAlignLeft},n.a.createElement(w.c,{name:"saveLocally",render:({field:t,form:a})=>n.a.createElement(Qe.a,{control:n.a.createElement(bt.a,{onChange:function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:d();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),disabled:e,name:"saveLocally",checked:t.value,color:"default"}),label:"Save to browser"})})),n.a.createElement(Vt.a,{item:!0,xs:1},n.a.createElement(Et.a,{title:"Delete address"},n.a.createElement(ba.a,{className:t.fab,size:"small",style:{boxShadow:"none",width:35,height:35},disabled:e,onClick:t=>{e||l("deleteAnchorEl",t.currentTarget)}},n.a.createElement(ga.a,null))),n.a.createElement(g.a,{id:"simple-menu",anchorEl:s.deleteAnchorEl,open:Boolean(s.deleteAnchorEl),onClose:()=>{l("deleteAnchorEl",null)}},n.a.createElement(v.a,{onClick:()=>{i(o),l("deleteAnchorEl",null)},className:t.deleteConfirmationText},"Confirm Delete"))))))})}));var ya=c()(P.b,O.b,Object(i.a)(e=>({transaction:{overflowWrap:"break-word"}})))((function(e){const t=e.classes,a=e.walletController.getActiveAddress,r=e.networkController.networkProps,s=a();return n.a.createElement(n.a.Fragment,null,!Q()(s.transactions)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{variant:"h6"},"Recent Transactions"),s.transactions.map((function(e,a){const s=r.explorerURL+r.transactionUrlSuffix+e;return n.a.createElement(u.a,{key:a,gutterBottom:!0,className:t.transaction},n.a.createElement("b",null,"Tx ID:")," ",e," ",n.a.createElement(Et.a,{title:"Open Factom Explorer"},n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},n.a.createElement(jt.a,{color:"primary",style:{fontSize:15}}))))}))))}));var xa=()=>n.a.createElement(Vt.a,{container:!0},n.a.createElement(Vt.a,{item:!0,xs:12},n.a.createElement(aa,null),n.a.createElement("br",null)),n.a.createElement(Vt.a,{item:!0,xs:6},n.a.createElement(va,null)),n.a.createElement(Vt.a,{item:!0,xs:6},n.a.createElement(ya,null)));function wa(e){return n.a.createElement(u.a,{component:"div",className:e.classes.tabContainer},e.children)}var ka=c()(P.b,Object(i.a)({root:{textAlign:"center"},tabContainer:{paddingLeft:55,paddingRight:55,paddingTop:18,paddingBottom:10}}))((function(e){const t=Object(r.useState)(0),a=Object(L.a)(t,2),s=a[0],l=a[1];function o(e,t){l(t)}const c=e.classes,i=e.type,d=e.activeAddress,m=e.networkController.networkProps;let u=s;return"fct"===i&&u>=3&&"seed"!==d.importType&&(u=0),"ec"===i&&(u>1||1===u&&"seed"!==d.importType)&&(u=0),n.a.createElement("div",{className:c.root},"fct"===i&&n.a.createElement("div",null,n.a.createElement(Xt.a,{value:u,onChange:o,indicatorColor:"primary",textColor:"primary",centered:!0},n.a.createElement(Gt.a,{label:"Overview"}),n.a.createElement(Gt.a,{label:"Send "+m.factoidAbbreviationFull}),n.a.createElement(Gt.a,{label:"Convert to "+m.ecAbbreviation}),"seed"===d.importType&&n.a.createElement(Gt.a,{label:"View Private Key"})),0===u&&n.a.createElement(wa,{classes:c},n.a.createElement(xa,null)),1===u&&n.a.createElement(wa,{classes:c},n.a.createElement(ca,null)),2===u&&n.a.createElement(wa,{classes:c},n.a.createElement(ua,null)),3===u&&n.a.createElement(wa,{classes:c},n.a.createElement(Ea,null))),"ec"===i&&n.a.createElement("div",null,n.a.createElement(Xt.a,{value:u,onChange:o,indicatorColor:"primary",textColor:"primary",centered:!0},n.a.createElement(Gt.a,{label:"Overview"}),"seed"===d.importType&&n.a.createElement(Gt.a,{label:"View Private Key"})),0===u&&n.a.createElement(wa,{classes:c},n.a.createElement(xa,null)),1===u&&n.a.createElement(wa,{classes:c},n.a.createElement(Ea,null))))}));var Aa=Object(O.b)((function(e){const t=e.walletController,a=t.updateBalances,s=t.getActiveAddress,l=t.activeAddressIndex_o;Object(r.useEffect)(()=>{a()},[a]);const o=s();return ae()(o)?n.a.createElement(n.a.Fragment,null):n.a.createElement(Vt.a,{container:!0,spacing:3},n.a.createElement(Vt.a,{item:!0,md:4,xs:12},n.a.createElement(Yt,null)),n.a.createElement(Vt.a,{item:!0,md:8,xs:12},n.a.createElement(R.a,{elevation:2},n.a.createElement(ka,{type:l.type,activeAddress:o}))))}));class Ca extends r.Component{componentDidMount(){this.props.setReadyToManageWallet(!1)}render(){const e="testnet"===this.props.networkController.networkProps.network?"Manage Testnet Wallet":"Manage Wallet";return n.a.createElement(Vt.a,{container:!0,item:!0,xs:12,justify:"center"},n.a.createElement(Bt,{handleClose:()=>this.props.setReadyToManageWallet(!0),handleCloseText:e}))}}var Fa=c()(P.b,O.b,Object(i.a)(e=>({})))(Ca);var Sa=c()(O.b)((function(e){const t=e.walletController,a=t.readyToManageWallet,r=t.isWalletEmpty,s=t.setReadyToManageWallet;return n.a.createElement(Ve.a,null,n.a.createElement(Ke.a,{path:"/",render:()=>a&&!r()?n.a.createElement(Aa,null):n.a.createElement(Fa,{setReadyToManageWallet:s})}))}));class Ta extends r.Component{render(){const e=this.props.classes;return n.a.createElement(D.a,null,n.a.createElement(Ne,null,n.a.createElement(Se,null,n.a.createElement(Ee,null,n.a.createElement(De,null),n.a.createElement(M,null),n.a.createElement(ke,null,n.a.createElement(Oe.a,null,n.a.createElement("div",{className:e.body},n.a.createElement(Sa,null),n.a.createElement(He,null))))))))}}var Na=c()(z,Object(i.a)(e=>({body:{width:"1200px",margin:"0 auto"}})))(Ta);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(Na,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[347,1,2]]]);
//# sourceMappingURL=main.f11ef277.chunk.js.map